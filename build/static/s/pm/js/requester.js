"use strict";var Handlebars={};(function(Handlebars,undefined){Handlebars.VERSION="1.0.0";Handlebars.COMPILER_REVISION=4;Handlebars.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};Handlebars.helpers={};Handlebars.partials={};var toString=Object.prototype.toString,functionType="[object Function]",objectType="[object Object]";Handlebars.registerHelper=function(name,fn,inverse){if(toString.call(name)===objectType){if(inverse||fn){throw new Handlebars.Exception("Arg not supported with multiple helpers")}Handlebars.Utils.extend(this.helpers,name)}else{if(inverse){fn.not=inverse}this.helpers[name]=fn}};Handlebars.registerPartial=function(name,str){if(toString.call(name)===objectType){Handlebars.Utils.extend(this.partials,name)}else{this.partials[name]=str}};Handlebars.registerHelper("helperMissing",function(arg){if(arguments.length===2){return undefined}else{throw new Error("Missing helper: '"+arg+"'")}});Handlebars.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn;var type=toString.call(context);if(type===functionType){context=context.call(this)}if(context===true){return fn(this)}else{if(context===false||context==null){return inverse(this)}else{if(type==="[object Array]"){if(context.length>0){return Handlebars.helpers.each(context,options)}else{return inverse(this)}}else{return fn(context)}}}});Handlebars.K=function(){};Handlebars.createFrame=Object.create||function(object){Handlebars.K.prototype=object;var obj=new Handlebars.K();Handlebars.K.prototype=null;return obj};Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(level,obj){if(Handlebars.logger.level<=level){var method=Handlebars.logger.methodMap[level];if(typeof console!=="undefined"&&console[method]){console[method].call(console,obj)}}}};Handlebars.log=function(level,obj){Handlebars.logger.log(level,obj)};Handlebars.registerHelper("each",function(context,options){var fn=options.fn,inverse=options.inverse;var i=0,ret="",data;var type=toString.call(context);if(type===functionType){context=context.call(this)}if(options.data){data=Handlebars.createFrame(options.data)}if(context&&typeof context==="object"){if(context instanceof Array){for(var j=context.length;i<j;i++){if(data){data.index=i}ret=ret+fn(context[i],{data:data})}}else{for(var key in context){if(context.hasOwnProperty(key)){if(data){data.key=key}ret=ret+fn(context[key],{data:data});i++}}}}if(i===0){ret=inverse(this)}return ret});Handlebars.registerHelper("if",function(conditional,options){var type=toString.call(conditional);if(type===functionType){conditional=conditional.call(this)}if(!conditional||Handlebars.Utils.isEmpty(conditional)){return options.inverse(this)}else{return options.fn(this)}});Handlebars.registerHelper("unless",function(conditional,options){return Handlebars.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn})});Handlebars.registerHelper("with",function(context,options){var type=toString.call(context);if(type===functionType){context=context.call(this)}if(!Handlebars.Utils.isEmpty(context)){return options.fn(context)}});Handlebars.registerHelper("log",function(context,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;Handlebars.log(level,context)});var handlebars=(function(){var parser={trace:function trace(){},yy:{},symbols_:{"error":2,"root":3,"program":4,"EOF":5,"simpleInverse":6,"statements":7,"statement":8,"openInverse":9,"closeBlock":10,"openBlock":11,"mustache":12,"partial":13,"CONTENT":14,"COMMENT":15,"OPEN_BLOCK":16,"inMustache":17,"CLOSE":18,"OPEN_INVERSE":19,"OPEN_ENDBLOCK":20,"path":21,"OPEN":22,"OPEN_UNESCAPED":23,"CLOSE_UNESCAPED":24,"OPEN_PARTIAL":25,"partialName":26,"params":27,"hash":28,"dataName":29,"param":30,"STRING":31,"INTEGER":32,"BOOLEAN":33,"hashSegments":34,"hashSegment":35,"ID":36,"EQUALS":37,"DATA":38,"pathSegments":39,"SEP":40,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];break;case 2:this.$=new yy.ProgramNode([],$$[$0]);break;case 3:this.$=new yy.ProgramNode($$[$0-2],$$[$0]);break;case 4:this.$=new yy.ProgramNode($$[$0-1],[]);break;case 5:this.$=new yy.ProgramNode($$[$0]);break;case 6:this.$=new yy.ProgramNode([],[]);break;
case 7:this.$=new yy.ProgramNode([]);break;case 8:this.$=[$$[$0]];break;case 9:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 10:this.$=new yy.BlockNode($$[$0-2],$$[$0-1].inverse,$$[$0-1],$$[$0]);break;case 11:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0-1].inverse,$$[$0]);break;case 12:this.$=$$[$0];break;case 13:this.$=$$[$0];break;case 14:this.$=new yy.ContentNode($$[$0]);break;case 15:this.$=new yy.CommentNode($$[$0]);break;case 16:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 17:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 18:this.$=$$[$0-1];break;case 19:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1],$$[$0-2][2]==="&");break;case 20:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1],true);break;case 21:this.$=new yy.PartialNode($$[$0-1]);break;case 22:this.$=new yy.PartialNode($$[$0-2],$$[$0-1]);break;case 23:break;case 24:this.$=[[$$[$0-2]].concat($$[$0-1]),$$[$0]];break;case 25:this.$=[[$$[$0-1]].concat($$[$0]),null];break;case 26:this.$=[[$$[$0-1]],$$[$0]];break;case 27:this.$=[[$$[$0]],null];break;case 28:this.$=[[$$[$0]],null];break;case 29:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 30:this.$=[$$[$0]];break;case 31:this.$=$$[$0];break;case 32:this.$=new yy.StringNode($$[$0]);break;case 33:this.$=new yy.IntegerNode($$[$0]);break;case 34:this.$=new yy.BooleanNode($$[$0]);break;case 35:this.$=$$[$0];break;case 36:this.$=new yy.HashNode($$[$0]);break;case 37:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 38:this.$=[$$[$0]];break;case 39:this.$=[$$[$0-2],$$[$0]];break;case 40:this.$=[$$[$0-2],new yy.StringNode($$[$0])];break;case 41:this.$=[$$[$0-2],new yy.IntegerNode($$[$0])];break;case 42:this.$=[$$[$0-2],new yy.BooleanNode($$[$0])];break;case 43:this.$=[$$[$0-2],$$[$0]];break;case 44:this.$=new yy.PartialNameNode($$[$0]);break;case 45:this.$=new yy.PartialNameNode(new yy.StringNode($$[$0]));break;case 46:this.$=new yy.PartialNameNode(new yy.IntegerNode($$[$0]));break;case 47:this.$=new yy.DataNode($$[$0]);break;case 48:this.$=new yy.IdNode($$[$0]);break;case 49:$$[$0-2].push({part:$$[$0],separator:$$[$0-1]});this.$=$$[$0-2];break;case 50:this.$=[{part:$$[$0]}];break}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function parseError(str,hash){throw new Error(str)
},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n}function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=="number"){token=self.symbols_[token]||token}return token}var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state]}else{if(symbol===null||typeof symbol=="undefined"){symbol=lex()}action=table[state]&&table[state][symbol]}if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state]){if(this.terminals_[p]&&p>2){expected.push("'"+this.terminals_[p]+"'")}}if(this.lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'"}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'")}this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0] instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol)}switch(action[0]){case 1:stack.push(symbol);vstack.push(this.lexer.yytext);lstack.push(this.lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;if(recovering>0){recovering--}}else{symbol=preErrorSymbol;preErrorSymbol=null}break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};if(ranges){yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]}r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!=="undefined"){return r}if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true}}return true}};var lexer=(function(){var lexer=({EOF:1,parseError:function parseError(str,hash){if(this.yy.parser){this.yy.parser.parseError(str,hash)}else{throw new Error(str)}},setInput:function(input){this._input=input;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges){this.yylloc.range=[0,0]}this.offset=0;return this},input:function(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges){this.yylloc.range[1]++}this._input=this._input.slice(1);return ch},unput:function(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-len-1);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1){this.yylineno-=lines.length-1}var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len};if(this.options.ranges){this.yylloc.range=[r[0],r[0]+this.yyleng-len]}return this},more:function(){this._more=true;return this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length)}return(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput();
var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var token,match,tempMatch,index,col,lines;if(!this._more){this.yytext="";this.match=""}var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=tempMatch;index=i;if(!this.options.flex){break}}}if(match){lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno+=lines.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input){this.done=false}if(token){return token}else{return}}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function lex(){var r=this.next();if(typeof r!=="undefined"){return r}else{return this.lex()}},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.pop()},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function begin(condition){this.begin(condition)}});lexer.options={};lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:yy_.yytext="\\";return 14;break;case 1:if(yy_.yytext.slice(-1)!=="\\"){this.begin("mu")}if(yy_.yytext.slice(-1)==="\\"){yy_.yytext=yy_.yytext.substr(0,yy_.yyleng-1),this.begin("emu")}if(yy_.yytext){return 14}break;case 2:return 14;break;case 3:if(yy_.yytext.slice(-1)!=="\\"){this.popState()}if(yy_.yytext.slice(-1)==="\\"){yy_.yytext=yy_.yytext.substr(0,yy_.yyleng-1)}return 14;break;case 4:yy_.yytext=yy_.yytext.substr(0,yy_.yyleng-4);this.popState();return 15;break;case 5:return 25;break;case 6:return 16;break;case 7:return 20;break;case 8:return 19;break;case 9:return 19;break;case 10:return 23;break;case 11:return 22;break;case 12:this.popState();this.begin("com");break;case 13:yy_.yytext=yy_.yytext.substr(3,yy_.yyleng-5);this.popState();return 15;break;case 14:return 22;break;case 15:return 37;break;case 16:return 36;break;case 17:return 36;break;case 18:return 40;break;case 19:break;case 20:this.popState();return 24;break;case 21:this.popState();return 18;break;case 22:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\"/g,'"');return 31;break;case 23:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\'/g,"'");return 31;break;case 24:return 38;break;case 25:return 33;break;case 26:return 33;break;case 27:return 32;break;case 28:return 36;break;case 29:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2);return 36;break;case 30:return"INVALID";break;case 31:return 5;break}};lexer.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];lexer.conditions={"mu":{"rules":[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],"inclusive":false},"emu":{"rules":[3],"inclusive":false},"com":{"rules":[4],"inclusive":false},"INITIAL":{"rules":[0,1,2,31],"inclusive":true}};return lexer})();parser.lexer=lexer;function Parser(){this.yy={}}Parser.prototype=parser;parser.Parser=Parser;return new Parser})();Handlebars.Parser=handlebars;Handlebars.parse=function(input){if(input.constructor===Handlebars.AST.ProgramNode){return input}Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(input)};Handlebars.AST={};Handlebars.AST.ProgramNode=function(statements,inverse){this.type="program";this.statements=statements;if(inverse){this.inverse=new Handlebars.AST.ProgramNode(inverse)}};Handlebars.AST.MustacheNode=function(rawParams,hash,unescaped){this.type="mustache";this.escaped=!unescaped;this.hash=hash;var id=this.id=rawParams[0];
var params=this.params=rawParams.slice(1);var eligibleHelper=this.eligibleHelper=id.isSimple;this.isHelper=eligibleHelper&&(params.length||hash)};Handlebars.AST.PartialNode=function(partialName,context){this.type="partial";this.partialName=partialName;this.context=context};Handlebars.AST.BlockNode=function(mustache,program,inverse,close){var verifyMatch=function(open,close){if(open.original!==close.original){throw new Handlebars.Exception(open.original+" doesn't match "+close.original)}};verifyMatch(mustache.id,close);this.type="block";this.mustache=mustache;this.program=program;this.inverse=inverse;if(this.inverse&&!this.program){this.isInverse=true}};Handlebars.AST.ContentNode=function(string){this.type="content";this.string=string};Handlebars.AST.HashNode=function(pairs){this.type="hash";this.pairs=pairs};Handlebars.AST.IdNode=function(parts){this.type="ID";var original="",dig=[],depth=0;for(var i=0,l=parts.length;i<l;i++){var part=parts[i].part;original+=(parts[i].separator||"")+part;if(part===".."||part==="."||part==="this"){if(dig.length>0){throw new Handlebars.Exception("Invalid path: "+original)}else{if(part===".."){depth++}else{this.isScoped=true}}}else{dig.push(part)}}this.original=original;this.parts=dig;this.string=dig.join(".");this.depth=depth;this.isSimple=parts.length===1&&!this.isScoped&&depth===0;this.stringModeValue=this.string};Handlebars.AST.PartialNameNode=function(name){this.type="PARTIAL_NAME";this.name=name.original};Handlebars.AST.DataNode=function(id){this.type="DATA";this.id=id};Handlebars.AST.StringNode=function(string){this.type="STRING";this.original=this.string=this.stringModeValue=string};Handlebars.AST.IntegerNode=function(integer){this.type="INTEGER";this.original=this.integer=integer;this.stringModeValue=Number(integer)};Handlebars.AST.BooleanNode=function(bool){this.type="BOOLEAN";this.bool=bool;this.stringModeValue=bool==="true"};Handlebars.AST.CommentNode=function(comment){this.type="comment";this.comment=comment};var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(message){var tmp=Error.prototype.constructor.apply(this,arguments);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]]}};Handlebars.Exception.prototype=new Error();Handlebars.SafeString=function(string){this.string=string};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()};var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g;var possible=/[&<>"'`]/;var escapeChar=function(chr){return escape[chr]||"&amp;"};Handlebars.Utils={extend:function(obj,value){for(var key in value){if(value.hasOwnProperty(key)){obj[key]=value[key]}}},escapeExpression:function(string){if(string instanceof Handlebars.SafeString){return string.toString()}else{if(string==null||string===false){return""}}string=string.toString();if(!possible.test(string)){return string}return string.replace(badChars,escapeChar)},isEmpty:function(value){if(!value&&value!==0){return true}else{if(toString.call(value)==="[object Array]"&&value.length===0){return true}else{return false}}}};var Compiler=Handlebars.Compiler=function(){};var JavaScriptCompiler=Handlebars.JavaScriptCompiler=function(){};Compiler.prototype={compiler:Compiler,disassemble:function(){var opcodes=this.opcodes,opcode,out=[],params,param;for(var i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];if(opcode.opcode==="DECLARE"){out.push("DECLARE "+opcode.name+"="+opcode.value)}else{params=[];for(var j=0;j<opcode.args.length;j++){param=opcode.args[j];if(typeof param==="string"){param='"'+param.replace("\n","\\n")+'"'}params.push(param)}out.push(opcode.opcode+" "+params.join(" "))}}return out.join("\n")},equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len){return false}for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||opcode.args.length!==otherOpcode.args.length){return false}for(var j=0;j<opcode.args.length;j++){if(opcode.args[j]!==otherOpcode.args[j]){return false}}}len=this.children.length;if(other.children.length!==len){return false}for(i=0;i<len;i++){if(!this.children[i].equals(other.children[i])){return false}}return true},guid:0,compile:function(program,options){this.children=[];this.depths={list:[]};this.options=options;var knownHelpers=this.options.knownHelpers;this.options.knownHelpers={"helperMissing":true,"blockHelperMissing":true,"each":true,"if":true,"unless":true,"with":true,"log":true};if(knownHelpers){for(var name in knownHelpers){this.options.knownHelpers[name]=knownHelpers[name]}}return this.program(program)},accept:function(node){return this[node.type](node)},program:function(program){var statements=program.statements,statement;this.opcodes=[];for(var i=0,l=statements.length;i<l;i++){statement=statements[i];this[statement.type](statement)}this.isSimple=l===1;this.depths.list=this.depths.list.sort(function(a,b){return a-b
});return this},compileProgram:function(program){var result=new this.compiler().compile(program,this.options);var guid=this.guid++,depth;this.usePartial=this.usePartial||result.usePartial;this.children[guid]=result;for(var i=0,l=result.depths.list.length;i<l;i++){depth=result.depths.list[i];if(depth<2){continue}else{this.addDepth(depth-1)}}return guid},block:function(block){var mustache=block.mustache,program=block.program,inverse=block.inverse;if(program){program=this.compileProgram(program)}if(inverse){inverse=this.compileProgram(inverse)}var type=this.classifyMustache(mustache);if(type==="helper"){this.helperMustache(mustache,program,inverse)}else{if(type==="simple"){this.simpleMustache(mustache);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousMustache(mustache,program,inverse);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}}this.opcode("append")},hash:function(hash){var pairs=hash.pairs,pair,val;this.opcode("pushHash");for(var i=0,l=pairs.length;i<l;i++){pair=pairs[i];val=pair[1];if(this.options.stringParams){if(val.depth){this.addDepth(val.depth)}this.opcode("getContext",val.depth||0);this.opcode("pushStringParam",val.stringModeValue,val.type)}else{this.accept(val)}this.opcode("assignToHash",pair[0])}this.opcode("popHash")},partial:function(partial){var partialName=partial.partialName;this.usePartial=true;if(partial.context){this.ID(partial.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",partialName.name);this.opcode("append")},content:function(content){this.opcode("appendContent",content.string)},mustache:function(mustache){var options=this.options;var type=this.classifyMustache(mustache);if(type==="simple"){this.simpleMustache(mustache)}else{if(type==="helper"){this.helperMustache(mustache)}else{this.ambiguousMustache(mustache)}}if(mustache.escaped&&!options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousMustache:function(mustache,program,inverse){var id=mustache.id,name=id.parts[0],isBlock=program!=null||inverse!=null;this.opcode("getContext",id.depth);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("invokeAmbiguous",name,isBlock)},simpleMustache:function(mustache){var id=mustache.id;if(id.type==="DATA"){this.DATA(id)}else{if(id.parts.length){this.ID(id)}else{this.addDepth(id.depth);this.opcode("getContext",id.depth);this.opcode("pushContext")}}this.opcode("resolvePossibleLambda")},helperMustache:function(mustache,program,inverse){var params=this.setupFullMustacheParams(mustache,program,inverse),name=mustache.id.parts[0];if(this.options.knownHelpers[name]){this.opcode("invokeKnownHelper",params.length,name)}else{if(this.options.knownHelpersOnly){throw new Error("You specified knownHelpersOnly, but used the unknown helper "+name)}else{this.opcode("invokeHelper",params.length,name)}}},ID:function(id){this.addDepth(id.depth);this.opcode("getContext",id.depth);var name=id.parts[0];if(!name){this.opcode("pushContext")}else{this.opcode("lookupOnContext",id.parts[0])}for(var i=1,l=id.parts.length;i<l;i++){this.opcode("lookup",id.parts[i])}},DATA:function(data){this.options.data=true;if(data.id.isScoped||data.id.depth){throw new Handlebars.Exception("Scoped data references are not supported: "+data.original)}this.opcode("lookupData");var parts=data.id.parts;for(var i=0,l=parts.length;i<l;i++){this.opcode("lookup",parts[i])}},STRING:function(string){this.opcode("pushString",string.string)},INTEGER:function(integer){this.opcode("pushLiteral",integer.integer)},BOOLEAN:function(bool){this.opcode("pushLiteral",bool.bool)},comment:function(){},opcode:function(name){this.opcodes.push({opcode:name,args:[].slice.call(arguments,1)})},declare:function(name,value){this.opcodes.push({opcode:"DECLARE",name:name,value:value})},addDepth:function(depth){if(isNaN(depth)){throw new Error("EWOT")}if(depth===0){return}if(!this.depths[depth]){this.depths[depth]=true;this.depths.list.push(depth)}},classifyMustache:function(mustache){var isHelper=mustache.isHelper;var isEligible=mustache.eligibleHelper;var options=this.options;if(isEligible&&!isHelper){var name=mustache.id.parts[0];if(options.knownHelpers[name]){isHelper=true}else{if(options.knownHelpersOnly){isEligible=false}}}if(isHelper){return"helper"}else{if(isEligible){return"ambiguous"}else{return"simple"}}},pushParams:function(params){var i=params.length,param;while(i--){param=params[i];if(this.options.stringParams){if(param.depth){this.addDepth(param.depth)}this.opcode("getContext",param.depth||0);this.opcode("pushStringParam",param.stringModeValue,param.type)}else{this[param.type](param)}}},setupMustacheParams:function(mustache){var params=mustache.params;this.pushParams(params);if(mustache.hash){this.hash(mustache.hash)}else{this.opcode("emptyHash")}return params},setupFullMustacheParams:function(mustache,program,inverse){var params=mustache.params;
this.pushParams(params);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);if(mustache.hash){this.hash(mustache.hash)}else{this.opcode("emptyHash")}return params}};var Literal=function(value){this.value=value};JavaScriptCompiler.prototype={nameLookup:function(parent,name){if(/^[0-9]+$/.test(name)){return parent+"["+name+"]"}else{if(JavaScriptCompiler.isValidJavaScriptVariableName(name)){return parent+"."+name}else{return parent+"['"+name+"']"}}},appendToBuffer:function(string){if(this.environment.isSimple){return"return "+string+";"}else{return{appendToBuffer:true,content:string,toString:function(){return"buffer += "+string+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment;this.options=options||{};Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!context;this.context=context||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=[];this.compileChildren(environment,options);var opcodes=environment.opcodes,opcode;this.i=0;for(l=opcodes.length;this.i<l;this.i++){opcode=opcodes[this.i];if(opcode.opcode==="DECLARE"){this[opcode.name]=opcode.value}else{this[opcode.opcode].apply(this,opcode.args)}}return this.createFunctionContext(asObject)},nextOpcode:function(){var opcodes=this.environment.opcodes;return opcodes[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var out=[];if(!this.isChild){var namespace=this.namespace;var copies="helpers = this.merge(helpers, "+namespace+".helpers);";if(this.environment.usePartial){copies=copies+" partials = this.merge(partials, "+namespace+".partials);"}if(this.options.data){copies=copies+" data = data || {};"}out.push(copies)}else{out.push("")}if(!this.environment.isSimple){out.push(", buffer = "+this.initializeBuffer())}else{out.push("")}this.lastContext=0;this.source=out},createFunctionContext:function(asObject){var locals=this.stackVars.concat(this.registers.list);if(locals.length>0){this.source[1]=this.source[1]+", "+locals.join(", ")}if(!this.isChild){for(var alias in this.context.aliases){if(this.context.aliases.hasOwnProperty(alias)){this.source[1]=this.source[1]+", "+alias+"="+this.context.aliases[alias]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.source.push("return buffer;")}var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,l=this.environment.depths.list.length;i<l;i++){params.push("depth"+this.environment.depths.list[i])}var source=this.mergeSource();if(!this.isChild){var revision=Handlebars.COMPILER_REVISION,versions=Handlebars.REVISION_CHANGES[revision];source="this.compilerInfo = ["+revision+",'"+versions+"'];\n"+source}if(asObject){params.push(source);return Function.apply(this,params)}else{var functionSource="function "+(this.name||"")+"("+params.join(",")+") {\n  "+source+"}";Handlebars.log(Handlebars.logger.DEBUG,functionSource+"\n\n");return functionSource}},mergeSource:function(){var source="",buffer;for(var i=0,len=this.source.length;i<len;i++){var line=this.source[i];if(line.appendToBuffer){if(buffer){buffer=buffer+"\n    + "+line.content}else{buffer=line.content}}else{if(buffer){source+="buffer += "+buffer+";\n  ";buffer=undefined}source+=line+"\n  "}}return source},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);this.replaceStack(function(current){params.splice(1,0,current);return"blockHelperMissing.call("+params.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);var current=this.topStack();params.splice(1,0,current);params[params.length-1]="options";this.source.push("if (!"+this.lastHelper+") { "+current+" = blockHelperMissing.call("+params.join(", ")+"); }")},appendContent:function(content){this.source.push(this.appendToBuffer(this.quotedString(content)))},append:function(){this.flushInline();var local=this.popStack();this.source.push("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }");if(this.environment.isSimple){this.source.push("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(depth){if(this.lastContext!==depth){this.lastContext=depth}},lookupOnContext:function(name){this.push(this.nameLookup("depth"+this.lastContext,name,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';
this.replaceStack(function(current){return"typeof "+current+" === functionType ? "+current+".apply(depth0) : "+current})},lookup:function(name){this.replaceStack(function(current){return current+" == null || "+current+" === false ? "+current+" : "+this.nameLookup(current,name,"context")})},lookupData:function(id){this.push("data")},pushStringParam:function(string,type){this.pushStackLiteral("depth"+this.lastContext);this.pushString(type);if(typeof string==="string"){this.pushString(string)}else{this.pushStackLiteral(string)}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.register("hashTypes","{}");this.register("hashContexts","{}")}},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var hash=this.hash;this.hash=undefined;if(this.options.stringParams){this.register("hashContexts","{"+hash.contexts.join(",")+"}");this.register("hashTypes","{"+hash.types.join(",")+"}")}this.push("{\n    "+hash.values.join(",\n    ")+"\n  }")},pushString:function(string){this.pushStackLiteral(this.quotedString(string))},push:function(expr){this.inlineStack.push(expr);return expr},pushLiteral:function(value){this.pushStackLiteral(value)},pushProgram:function(guid){if(guid!=null){this.pushStackLiteral(this.programExpression(guid))}else{this.pushStackLiteral(null)}},invokeHelper:function(paramSize,name){this.context.aliases.helperMissing="helpers.helperMissing";var helper=this.lastHelper=this.setupHelper(paramSize,name,true);var nonHelper=this.nameLookup("depth"+this.lastContext,name,"context");this.push(helper.name+" || "+nonHelper);this.replaceStack(function(name){return name+" ? "+name+".call("+helper.callParams+") "+": helperMissing.call("+helper.helperMissingParams+")"})},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(helper.name+".call("+helper.callParams+")")},invokeAmbiguous:function(name,helperCall){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");var helper=this.setupHelper(0,name,helperCall);var helperName=this.lastHelper=this.nameLookup("helpers",name,"helper");var nonHelper=this.nameLookup("depth"+this.lastContext,name,"context");var nextStack=this.nextStack();this.source.push("if ("+nextStack+" = "+helperName+") { "+nextStack+" = "+nextStack+".call("+helper.callParams+"); }");this.source.push("else { "+nextStack+" = "+nonHelper+"; "+nextStack+" = typeof "+nextStack+" === functionType ? "+nextStack+".apply(depth0) : "+nextStack+"; }")},invokePartial:function(name){var params=[this.nameLookup("partials",name,"partial"),"'"+name+"'",this.popStack(),"helpers","partials"];if(this.options.data){params.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+params.join(", ")+")")},assignToHash:function(key){var value=this.popStack(),context,type;if(this.options.stringParams){type=this.popStack();context=this.popStack()}var hash=this.hash;if(context){hash.contexts.push("'"+key+"': "+context)}if(type){hash.types.push("'"+key+"': "+type)}hash.values.push("'"+key+"': ("+value+")")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){var children=environment.children,child,compiler;for(var i=0,l=children.length;i<l;i++){child=children[i];compiler=new this.compiler();var index=this.matchExistingProgram(child);if(index==null){this.context.programs.push("");index=this.context.programs.length;child.index=index;child.name="program"+index;this.context.programs[index]=compiler.compile(child,options,this.context);this.context.environments[index]=child}else{child.index=index;child.name="program"+index}}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child)){return i}}},programExpression:function(guid){this.context.aliases.self="this";if(guid==null){return"self.noop"}var child=this.environment.children[guid],depths=child.depths.list,depth;var programParams=[child.index,child.name,"data"];for(var i=0,l=depths.length;i<l;i++){depth=depths[i];if(depth===1){programParams.push("depth0")}else{programParams.push("depth"+(depth-1))}}return(depths.length===0?"self.program(":"self.programWithDepth(")+programParams.join(", ")+")"},register:function(name,val){this.useRegister(name);this.source.push(name+" = "+val+";")},useRegister:function(name){if(!this.registers[name]){this.registers[name]=true;this.registers.list.push(name)}},pushStackLiteral:function(item){return this.push(new Literal(item))},pushStack:function(item){this.flushInline();var stack=this.incrStack();if(item){this.source.push(stack+" = "+item+";")}this.compileStack.push(stack);return stack},replaceStack:function(callback){var prefix="",inline=this.isInline(),stack;if(inline){var top=this.popStack(true);if(top instanceof Literal){stack=top.value}else{var name=this.stackSlot?this.topStackName():this.incrStack();prefix="("+this.push(name)+" = "+top+"),";stack=this.topStack()
}}else{stack=this.topStack()}var item=callback.call(this,stack);if(inline){if(this.inlineStack.length||this.compileStack.length){this.popStack()}this.push("("+prefix+item+")")}else{if(!/^stack/.test(stack)){stack=this.nextStack()}this.source.push(stack+" = ("+prefix+item+");")}return stack},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var inlineStack=this.inlineStack;if(inlineStack.length){this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];if(entry instanceof Literal){this.compileStack.push(entry)}else{this.pushStack(entry)}}}},isInline:function(){return this.inlineStack.length},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&(item instanceof Literal)){return item.value}else{if(!inline){this.stackSlot--}return item}},topStack:function(wrapped){var stack=(this.isInline()?this.inlineStack:this.compileStack),item=stack[stack.length-1];if(!wrapped&&(item instanceof Literal)){return item.value}else{return item}},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(paramSize,name,missingParams){var params=[];this.setupParams(paramSize,params,missingParams);var foundHelper=this.nameLookup("helpers",name,"helper");return{params:params,name:foundHelper,callParams:["depth0"].concat(params).join(", "),helperMissingParams:missingParams&&["depth0",this.quotedString(name)].concat(params).join(", ")}},setupParams:function(paramSize,params,useRegister){var options=[],contexts=[],types=[],param,inverse,program;options.push("hash:"+this.popStack());inverse=this.popStack();program=this.popStack();if(program||inverse){if(!program){this.context.aliases.self="this";program="self.noop"}if(!inverse){this.context.aliases.self="this";inverse="self.noop"}options.push("inverse:"+inverse);options.push("fn:"+program)}for(var i=0;i<paramSize;i++){param=this.popStack();params.push(param);if(this.options.stringParams){types.push(this.popStack());contexts.push(this.popStack())}}if(this.options.stringParams){options.push("contexts:["+contexts.join(",")+"]");options.push("types:["+types.join(",")+"]");options.push("hashContexts:hashContexts");options.push("hashTypes:hashTypes")}if(this.options.data){options.push("data:data")}options="{"+options.join(",")+"}";if(useRegister){this.register("options",options);params.push("options")}else{params.push(options)}return params.join(", ")}};var reservedWords=("break else new var"+" case finally return void"+" catch for switch while"+" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield").split(" ");var compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++){compilerWords[reservedWords[i]]=true}JavaScriptCompiler.isValidJavaScriptVariableName=function(name){if(!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(name)){return true}return false};Handlebars.precompile=function(input,options){if(input==null||(typeof input!=="string"&&input.constructor!==Handlebars.AST.ProgramNode)){throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input)}options=options||{};if(!("data" in options)){options.data=true}var ast=Handlebars.parse(input);var environment=new Compiler().compile(ast,options);return new JavaScriptCompiler().compile(environment,options)};Handlebars.compile=function(input,options){if(input==null||(typeof input!=="string"&&input.constructor!==Handlebars.AST.ProgramNode)){throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input)}options=options||{};if(!("data" in options)){options.data=true}var compiled;function compile(){var ast=Handlebars.parse(input);var environment=new Compiler().compile(ast,options);var templateSpec=new JavaScriptCompiler().compile(environment,options,undefined,true);return Handlebars.template(templateSpec)}return function(context,options){if(!compiled){compiled=compile()}return compiled.call(this,context,options)}};Handlebars.VM={template:function(templateSpec){var container={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];if(data){programWrapper=Handlebars.VM.program(i,fn,data)}else{if(!programWrapper){programWrapper=this.programs[i]=Handlebars.VM.program(i,fn)
}}return programWrapper},merge:function(param,common){var ret=param||common;if(param&&common){ret={};Handlebars.Utils.extend(ret,common);Handlebars.Utils.extend(ret,param)}return ret},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(context,options){options=options||{};var result=templateSpec.call(container,Handlebars,context,options.helpers,options.partials,options.data);var compilerInfo=container.compilerInfo||[],compilerRevision=compilerInfo[0]||1,currentRevision=Handlebars.COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=Handlebars.REVISION_CHANGES[currentRevision],compilerVersions=Handlebars.REVISION_CHANGES[compilerRevision];throw"Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+")."}else{throw"Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+")."}}return result}},programWithDepth:function(i,fn,data){var args=Array.prototype.slice.call(arguments,3);var program=function(context,options){options=options||{};return fn.apply(this,[context,options.data||data].concat(args))};program.program=i;program.depth=args.length;return program},program:function(i,fn,data){var program=function(context,options){options=options||{};return fn(context,options.data||data)};program.program=i;program.depth=0;return program},noop:function(){return""},invokePartial:function(partial,name,context,helpers,partials,data){var options={helpers:helpers,partials:partials,data:data};if(partial===undefined){throw new Handlebars.Exception("The partial "+name+" could not be found")}else{if(partial instanceof Function){return partial(context,options)}else{if(!Handlebars.compile){throw new Handlebars.Exception("The partial "+name+" could not be compiled when running in runtime-only mode")}else{partials[name]=Handlebars.compile(partial,{data:data!==undefined});return partials[name](context,options)}}}}};Handlebars.template=Handlebars.VM.template})(Handlebars);this["Handlebars"]=this["Handlebars"]||{};this["Handlebars"]["templates"]=this["Handlebars"]["templates"]||{};this["Handlebars"]["templates"]["broadcasts"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);partials=this.merge(partials,Handlebars.partials);data=data||{};var buffer="",stack1,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n    ";stack1=self.invokePartial(partials.item_broadcast,"item_broadcast",depth0,helpers,partials,data);if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer}stack1=helpers.each.call(depth0,depth0.items,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n\n";return buffer});this["Handlebars"]["templates"]["collection_selector_list"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);partials=this.merge(partials,Handlebars.partials);data=data||{};var stack1,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n    ";stack1=self.invokePartial(partials.item_collection_selector_list,"item_collection_selector_list",depth0,helpers,partials,data);if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer}stack1=helpers.each.call(depth0,depth0.items,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){return stack1}else{return""}});this["Handlebars"]["templates"]["collection_sidebar"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);partials=this.merge(partials,Handlebars.partials);data=data||{};var stack1,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n    ";stack1=self.invokePartial(partials.item_collection_sidebar_request,"item_collection_sidebar_request",depth0,helpers,partials,data);if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer}stack1=helpers.each.call(depth0,depth0.items,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){return stack1}else{return""}});this["Handlebars"]["templates"]["environment_list"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);partials=this.merge(partials,Handlebars.partials);data=data||{};var stack1,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n    ";stack1=self.invokePartial(partials.item_environment_list,"item_environment_list",depth0,helpers,partials,data);if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer}stack1=helpers.each.call(depth0,depth0.items,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){return stack1}else{return""}});this["Handlebars"]["templates"]["environment_quicklook"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);partials=this.merge(partials,Handlebars.partials);data=data||{};var stack1,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n    ";stack1=self.invokePartial(partials.item_environment_quicklook,"item_environment_quicklook",depth0,helpers,partials,data);if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer}stack1=helpers.each.call(depth0,depth0.items,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){return stack1}else{return""}});this["Handlebars"]["templates"]["environment_selector"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);partials=this.merge(partials,Handlebars.partials);data=data||{};var stack1,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n    ";stack1=self.invokePartial(partials.item_environment_selector,"item_environment_selector",depth0,helpers,partials,data);if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer}stack1=helpers.each.call(depth0,depth0.items,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){return stack1}else{return""}});this["Handlebars"]["templates"]["environment_selector_actions"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};return'<li><a class="environment-list-item-noenvironment" >Crow environment</a></li>\n<li class="divider"></li>\n<li><a href="#modal-environments" data-toggle="modal" data-keyboard="true">Manage environments</a></li>'});this["Handlebars"]["templates"]["header_preset_list"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];
helpers=this.merge(helpers,Handlebars.helpers);partials=this.merge(partials,Handlebars.partials);data=data||{};var stack1,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n    ";stack1=self.invokePartial(partials.item_header_preset_list,"item_header_preset_list",depth0,helpers,partials,data);if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer}stack1=helpers.each.call(depth0,depth0.items,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){return stack1}else{return""}});this["Handlebars"]["templates"]["history_sidebar_requests"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);partials=this.merge(partials,Handlebars.partials);data=data||{};var stack1,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n    ";stack1=self.invokePartial(partials.item_history_sidebar_request,"item_history_sidebar_request",depth0,helpers,partials,data);if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer}stack1=helpers.each.call(depth0,depth0.items,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){return stack1}else{return""}});this["Handlebars"]["templates"]["item_broadcast"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function";buffer+='<li class="broadcast">\n<div>';if(stack1=helpers.content){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.content;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(stack1||stack1===0){buffer+=stack1}buffer+="</div>\n</li>";return buffer});this["Handlebars"]["templates"]["item_collection_selector_list"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<option value="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</option>";return buffer});this["Handlebars"]["templates"]["item_collection_sidebar_head"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<li id="collection-';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="sidebar-collection">\n    <div class="sidebar-collection-head">\n        <div class="collection-head-actions">\n            <a\n               data-placement="bottom"\n               rel="tooltip" data-original-title="Edit collection"\n               ref="#modal-edit-collection" data-toggle="modal"\n               class="collection-actions-edit" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" data-name="';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n                <img src="s/pm/img/edit.png" style="vertical-align: middle;"/></a>\n            <a\n               data-placement="bottom"\n               rel="tooltip" data-original-title="Share collection"\n               class="collection-actions-download" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n                <img src="s/pm/img/share.png" style="vertical-align: middle;"/></a>\n            <a rel="tooltip" data-original-title="Delete collection"\n               data-name="';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'"\n               data-placement="bottom"\n               href="#modal-delete-collection" data-toggle="modal"\n               class="collection-actions-delete" data-id="';
if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n                <img src="s/pm/img/delete.png" style="vertical-align: middle;"/></a>\n        </div>\n        <div class="sidebar-collection-head-name" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n            ';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'\n        </div>\n    </div>\n    <ul id="collection-requests-';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="sidebar-collection-requests"></ul>\n</li>\n';return buffer});this["Handlebars"]["templates"]["item_collection_sidebar_request"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='\n    <li id="sidebar-request-';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="sidebar-collection-request sidebar-request clearfix">\n        <div class="request-actions">\n            <a  data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="request-actions-edit">\n                <img src="s/pm/img/edit.png" style="vertical-align: middle;"/>\n            </a>\n            <a  data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="request-actions-delete">\n                <img src="s/pm/img/delete.png" style="vertical-align: middle;"/>\n            </a>\n        </div>\n        <div class="request request-actions-load" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n            <a ><span class="label label-method-';if(stack1=helpers.method){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.method;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">';if(stack1=helpers.method){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.method;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</span>\n                <span class="request-name">\n                ';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(stack1||stack1===0){buffer+=stack1}buffer+="\n                </span>\n            </a>\n        </div>\n    </li>";return buffer});this["Handlebars"]["templates"]["item_editor_standard"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="";return buffer});this["Handlebars"]["templates"]["item_environment_list"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<tr>\n    <td>\n        <a  class="environment-action-edit" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</a>\n    </td>\n    <td style="width: 70px;">\n        <a\n           rel="tooltip" data-original-title="Duplicate environment"\n           data-placement="bottom"\n           class="environment-action-duplicate" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n           <img src="s/pm/img/copy.png"\n                style="vertical-align: middle; width: 20px; height: 20px;"/></a>\n        <a\n           rel="tooltip" data-original-title="Download environment"\n           data-placement="bottom"\n           class="environment-action-download" data-id="';
if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n            <img src="s/pm/img/download.png"\n                 style="vertical-align: middle; width: 20px; height: 20px;"/></a>\n        <a\n           data-name="';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'"\n           rel="tooltip" data-original-title="Delete environment" data-placement="bottom"\n           class="environment-action-delete" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n            <img src="s/pm/img/delete.png" style="vertical-align: middle; width: 20px; height: 20px;"/></a>\n    </td>\n</tr>\n';return buffer});this["Handlebars"]["templates"]["item_environment_quicklook"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<li>\n    <span class="key">';if(stack1=helpers.key){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.key;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</span> \n    <span class="value">';if(stack1=helpers.value){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.value;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</span>\n</li>\n";return buffer});this["Handlebars"]["templates"]["item_environment_selector"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<li><a  class="environment-list-item" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</a></li>\n";return buffer});this["Handlebars"]["templates"]["item_header_preset_list"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<tr>\n    <td>\n        <a  class="header-preset-action-edit" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</a>\n    </td>\n    <td style="width: 50px;">\n        <a\n           data-name="';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'"\n           rel="tooltip" data-original-title="Delete header preset" data-placement="bottom"\n           class="header-preset-action-delete" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n            <img src="s/pm/img/delete.png" style="vertical-align: middle; width: 20px; height: 20px;"/></a>\n    </td>\n</tr>\n';return buffer});this["Handlebars"]["templates"]["item_history_sidebar_request"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<li id="sidebar-request-';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="sidebar-history-request sidebar-request clearfix">\n    <div class="request-actions">\n        <a  data-request-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1
}buffer+=escapeExpression(stack1)+'" class="request-actions-delete">\n            <img src="s/pm/img/delete.png"/>\n        </a>\n    </div>\n    <div class="request" data-request-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n        <a  data-request-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n            <span\n            class="label label-method-';if(stack1=helpers.method){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.method;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">';if(stack1=helpers.method){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.method;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</span>\n            <span class="request-name">\n                ';if(stack1=helpers.url){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.url;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(stack1||stack1===0){buffer+=stack1}buffer+="\n            </span>\n        </a>\n    </div>\n</li>";return buffer});this["Handlebars"]["templates"]["item_response_code"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<div class="response-code" data-placement="bottom" data-original-title="';if(stack1=helpers.code){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.code;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+" ";if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" data-content="';if(stack1=helpers.detail){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.detail;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'"\n     rel="popover"><span class="label">Status</span>\n    <div class="data">';if(stack1=helpers.code){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.code;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+" ";if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</div>\n</div>\n";return buffer});this["Handlebars"]["templates"]["item_response_cookie"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+="<tr>\n    <td>";if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</td>\n    <td>";if(stack1=helpers.value){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.value;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</td>\n    <td>";if(stack1=helpers.domain){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.domain;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</td>\n    <td>";if(stack1=helpers.path){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.path;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</td>\n    <td>";if(stack1=helpers.expires){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.expires;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</td>\n    <td>";if(stack1=helpers.httpOnly){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.httpOnly;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</td>\n    <td>";if(stack1=helpers.secure){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.secure;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</td>\n</tr>\n";return buffer});this["Handlebars"]["templates"]["item_response_header"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,functionType="function",self=this;
function program1(depth0,data){var buffer="",stack1,options;buffer+="\n            ";options={hash:{},data:data};buffer+=escapeExpression(((stack1=helpers.link_to_hyperlink||depth0.link_to_hyperlink),stack1?stack1.call(depth0,depth0.value,options):helperMissing.call(depth0,"link_to_hyperlink",depth0.value,options)))+"\n        ";return buffer}function program3(depth0,data){var buffer="",stack1;buffer+="\n            ";if(stack1=helpers.value){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.value;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"\n        ";return buffer}buffer+='<li class="response-header clearfix">\n    <div class="response-header-name" data-placement="top" data-original-title="';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'"\n         data-content="';if(stack1=helpers.description){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.description;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'"\n         data-trigger="hover"\n         rel="popover">';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+' &rarr;</div>\n    <div class="response-header-value">\n        ';stack1=helpers["if"].call(depth0,depth0.isLink,{hash:{},inverse:self.program(3,program3,data),fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n    </div>\n</li>";return buffer});this["Handlebars"]["templates"]["item_sample_response"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<tr data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n	<td>\n		<a class="sample-response-name" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</a>\n	</td>\n	<td width="50px">\n		<a class="sample-response-delete" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">Remove</a>\n	</td>\n</tr>';return buffer});this["Handlebars"]["templates"]["message_collection_added"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<div class="alert alert-block">\n    <a class="close" data-dismiss="alert"></a>\n    <h4 class="alert-heading">It worked!</h4>\n    The collection ';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+" has been ";if(stack1=helpers.action){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.action;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+".\n</div>";return buffer});this["Handlebars"]["templates"]["message_environment_added"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<div class="alert alert-block">\n    <a class="close" data-dismiss="alert"></a>\n    <h4 class="alert-heading">It worked!</h4>\n    The environment ';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+" has been ";if(stack1=helpers.action){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.action;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+".\n</div>";return buffer});this["Handlebars"]["templates"]["message_no_collection"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);
data=data||{};return'<div class="empty-message">\n    You haven\'t created any collections yet. Collections let you group requests together for quick access.\n</div>'});this["Handlebars"]["templates"]["message_no_history"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};return'<div class="empty-message">\n    Nothing in your history yet. You can automatically save and access your sent requests here.\n</div>'});this["Handlebars"]["templates"]["response_cookies"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);partials=this.merge(partials,Handlebars.partials);data=data||{};var stack1,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n    ";stack1=self.invokePartial(partials.item_response_cookie,"item_response_cookie",depth0,helpers,partials,data);if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer}stack1=helpers.each.call(depth0,depth0.items,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){return stack1}else{return""}});this["Handlebars"]["templates"]["response_headers"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);partials=this.merge(partials,Handlebars.partials);data=data||{};var stack1,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n    ";stack1=self.invokePartial(partials.item_response_header,"item_response_header",depth0,helpers,partials,data);if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer}stack1=helpers.each.call(depth0,depth0.items,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){return stack1}else{return""}});this["Handlebars"]["templates"]["sample_responses"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);partials=this.merge(partials,Handlebars.partials);data=data||{};var stack1,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n    ";stack1=self.invokePartial(partials.item_sample_response,"item_sample_response",depth0,helpers,partials,data);if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer}stack1=helpers.each.call(depth0,depth0.items,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){return stack1}else{return""}});this["Handlebars"]["templates"]["v3_carousel"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};return'<div id="v3-carousel" class="carousel slide">\n	<div class="v3-carousel-close-button-wrapper">\n		<a class="v3-carousel-close-button"><img src="s/pm/img/delete_dark.svg"></a>\n	</div>\n	<div class="carousel-inner">\n		<div class="active item"><img draggable="false" src="s/pm/img/v3_migration/migration_1.jpg" class="carousel-image"></div>\n		<div class="item"><img draggable="false" src="s/pm/img/v3_migration/migration_2.jpg" class="carousel-image"></div>\n		<div class="item"><img draggable="false" src="s/pm/img/v3_migration/migration_3.jpg" class="carousel-image"></div>\n		<div class="item"><img draggable="false" src="s/pm/img/v3_migration/migration_4.jpg" class="carousel-image"></div>\n		<div class="item"><img draggable="false" src="s/pm/img/v3_migration/migration_5.jpg" class="carousel-image"></div>\n		<div class="item"><img draggable="false" src="s/pm/img/v3_migration/migration_6.jpg" class="carousel-image"></div>\n	</div>\n	<ol class="carousel-indicators">\n		<li data-target="#v3-carousel" data-slide-to="0" class="active"></li>\n		<li data-target="#v3-carousel" data-slide-to="1"></li>\n		<li data-target="#v3-carousel" data-slide-to="2"></li>\n		<li data-target="#v3-carousel" data-slide-to="3"></li>\n		<li data-target="#v3-carousel" data-slide-to="4"></li>\n		<li data-target="#v3-carousel" data-slide-to="5"></li>\n	</ol>\n	<div class="v3-carousel-button-wrapper">\n		<a class="v3-carousel-button">Get it now, it\'s free</a>\n	</div>\n</div>\n\n'});function Collection(){this.id="";this.name="";this.requests={}}function CollectionRequest(){this.collectionId="";this.id="";this.name="";this.description="";this.url="";this.method="";this.headers="";this.data="";this.dataMode="params";this.timestamp=0}function Request(){this.id="";this.name="";this.description="";this.url="";this.method="";this.headers="";this.data="";this.dataMode="params";this.timestamp=0}function sortAlphabetical(a,b){var counter;if(a.name.length>b.name.legnth){counter=b.name.length}else{counter=a.name.length}for(var i=0;i<counter;i++){if(a.name[i]==b.name[i]){continue}else{if(a.name[i]>b.name[i]){return 1}else{return -1}}}return 1}var pm={};pm.debug=true;pm.indexedDB={};pm.indexedDB.db=null;pm.indexedDB.modes={readwrite:"readwrite",readonly:"readonly"};pm.fs={};pm.bannedHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];var IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction;var IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange;var IDBCursor=window.IDBCursor||window.webkitIDBCursor;window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;pm.init=function(){Handlebars.partials=Handlebars.templates;pm.history.init();pm.collections.init();pm.settings.init();pm.layout.init();pm.editor.init();pm.jsonlint.init();pm.request.init();pm.urlCache.refreshAutoComplete();pm.helpers.init();pm.keymap.init();pm.envManager.init();pm.filesystem.init();pm.indexedDB.open();pm.broadcasts.init();$(":input:first").focus()};$(document).ready(function(){pm.init()});$(window).on("unload",function(){pm.request.saveCurrentRequestToLocalStorage()});pm.broadcasts={init:function(){var broadcasts=localStorage["broadcasts"];var last_update_time=localStorage["broadcast_last_update_time"];var today=new Date();pm.broadcasts.showBlank();if(last_update_time){var last_update=new Date(last_update_time);pm.broadcasts.setLastUpdateTime(today)}else{pm.broadcasts.setLastUpdateTime(today)}$("#broadcasts-count").on("click",function(){tracker.sendEvent("broadcast","view");pm.broadcasts.markAllAsRead()})},showBlank:function(){var $broadcasts_count=$("#broadcasts-count");$broadcasts_count.removeClass();$broadcasts_count.addClass("no-new-broadcasts");$broadcasts_count.html("0")},setLastUpdateTime:function(last_update){localStorage["broadcast_last_update_time"]=last_update.toUTCString()},setBroadcasts:function(broadcasts){var old_broadcasts;if("broadcasts" in localStorage){old_broadcasts=JSON.parse(localStorage["broadcasts"])}else{old_broadcasts=[]}var i,c,count;if(old_broadcasts.length==0){c=broadcasts.length;for(i=0;i<c;i++){broadcasts[i]["status"]="unread"}count=broadcasts.length;localStorage["broadcasts"]=JSON.stringify(broadcasts)}else{c=broadcasts.length;var new_broadcasts=[];for(i=0;i<c;i++){var b=broadcasts[i];var existing=_.find(old_broadcasts,function(br){return br.id===b.id});if(!existing){b["status"]="unread";new_broadcasts.push(b)}}count=new_broadcasts.length;old_broadcasts=_.union(new_broadcasts,old_broadcasts);localStorage["broadcasts"]=JSON.stringify(old_broadcasts)}var $broadcasts_count=$("#broadcasts-count");$broadcasts_count.html(count);$broadcasts_count.removeClass();if(count>0){$broadcasts_count.addClass("new-broadcasts")}else{$broadcasts_count.addClass("no-new-broadcasts")}},markAllAsRead:function(){var $broadcasts_count=$("#broadcasts-count");$broadcasts_count.removeClass();$broadcasts_count.addClass("no-new-broadcasts");$broadcasts_count.html("0");var broadcasts=JSON.parse(localStorage["broadcasts"]);var c=broadcasts.length;for(var i=0;i<c;i++){broadcasts[i]["status"]="read"}localStorage["broadcasts"]=JSON.stringify(broadcasts);pm.broadcasts.renderBroadcasts()},renderBroadcasts:function(){var broadcasts=JSON.parse(localStorage["broadcasts"]);$("#broadcasts .dropdown-menu").html("");$("#broadcasts .dropdown-menu").append(Handlebars.templates.broadcasts({"items":broadcasts}))}};pm.collections={areLoaded:false,items:[],init:function(){this.addCollectionListeners()},addCollectionListeners:function(){var $collection_items=$("#collection-items");$collection_items.on("mouseenter",".sidebar-collection .sidebar-collection-head",function(){var actionsEl=jQuery(".collection-head-actions",this);actionsEl.css("display","block")});$collection_items.on("mouseleave",".sidebar-collection .sidebar-collection-head",function(){var actionsEl=jQuery(".collection-head-actions",this);actionsEl.css("display","none")});$collection_items.on("click",".sidebar-collection-head-name",function(){var id=$(this).attr("data-id");pm.collections.toggleRequestList(id)});$collection_items.on("click",".collection-head-actions .label",function(){var id=$(this).parent().parent().parent().attr("data-id");pm.collections.toggleRequestList(id)});$collection_items.on("click",".request-actions-load",function(){var id=$(this).attr("data-id");
pm.collections.getCollectionRequest(id)});$collection_items.on("click",".request-actions-delete",function(){var id=$(this).attr("data-id");pm.indexedDB.getCollectionRequest(id,function(req){$("#modal-delete-collection-request-yes").attr("data-id",id);$("#modal-delete-collection-request-name").html(req.name);$("#modal-delete-collection-request").modal("show")})});$collection_items.on("click",".request-actions-edit",function(){var id=$(this).attr("data-id");$("#form-edit-collection-request .collection-request-id").val(id);pm.indexedDB.getCollectionRequest(id,function(req){$("#form-edit-collection-request .collection-request-name").val(req.name);$("#form-edit-collection-request .collection-request-description").val(req.description);$("#modal-edit-collection-request").modal("show")})});$collection_items.on("click",".collection-actions-edit",function(){var id=$(this).attr("data-id");pm.indexedDB.getCollection(id,function(collection){$("#form-edit-collection .collection-id").val(collection.id);$("#form-edit-collection .collection-name").val(collection.name);$("#modal-edit-collection").modal("show")})});$collection_items.on("click",".collection-actions-delete",function(){var id=$(this).attr("data-id");var name=$(this).attr("data-name");pm.indexedDB.getCollection(id,function(collection){$("#modal-delete-collection-yes").attr("data-id",id);$("#modal-delete-collection-name").html(collection.name)})});$("#modal-delete-collection-yes").on("click",function(){var id=$(this).attr("data-id");pm.collections.deleteCollection(id)});$("#modal-delete-collection-request-yes").on("click",function(){var id=$(this).attr("data-id");pm.collections.deleteCollectionRequest(id)});$("#import-collection-url-submit").on("click",function(){var url=$("#import-collection-url-input").val();pm.collections.importCollectionFromUrl(url)});$collection_items.on("click",".collection-actions-download",function(){var id=$(this).attr("data-id")});$("#request-samples").on("click",".sample-response-name",function(){var id=$(this).attr("data-id");pm.collections.loadResponseInEditor(id)});$("#request-samples").on("click",".sample-response-delete",function(){var id=$(this).attr("data-id");pm.collections.removeSampleResponse(id)});var dropZone=document.getElementById("import-collection-dropzone");dropZone.addEventListener("dragover",function(evt){evt.stopPropagation();evt.preventDefault();evt.dataTransfer.dropEffect="copy"},false);dropZone.addEventListener("drop",function(evt){evt.stopPropagation();evt.preventDefault();var files=evt.dataTransfer.files;pm.collections.importCollections(files)},false);$("#collection-files-input").on("change",function(event){var files=event.target.files;pm.collections.importCollections(files);$("#collection-files-input").val("")})},getCollectionData:function(id,callback){pm.indexedDB.getCollection(id,function(data){var collection=data;pm.indexedDB.getAllRequestsInCollection(collection,function(collection,data){var ids=[];for(var i=0,count=data.length;i<count;i++){ids.push(data[i].id)}collection["requests"]=data;var name=collection["name"]+".json";var type="application/json";var filedata=JSON.stringify(collection);callback(name,type,filedata)})})},saveCollection:function(id){pm.collections.getCollectionData(id,function(name,type,filedata){pm.filesystem.saveAndOpenFile(name,filedata,type,function(){})})},importCollectionData:function(collection){pm.indexedDB.addCollection(collection,function(c){var message={name:collection.name,action:"added"};$(".modal-import-alerts").append(Handlebars.templates.message_collection_added(message));var requests=[];var ordered=false;if("order" in collection){ordered=true}for(var i=0;i<collection.requests.length;i++){var request=collection.requests[i];request.collectionId=collection.id;if(request.hasOwnProperty("rawModeData")){request.data=request.rawModeData}var newId=guid();if(ordered){var currentId=request.id;var loc=_.indexOf(collection["order"],currentId);collection["order"][loc]=newId}request.id=newId;if("responses" in request){var j,count;for(j=0,count=request["responses"].length;j<count;j++){request["responses"][j].id=guid();request["responses"][j].collectionRequestId=newId}}pm.indexedDB.addCollectionRequest(request,function(req){});requests.push(request)}pm.indexedDB.updateCollection(collection,function(){});collection.requests=requests;pm.collections.render(collection)})},importCollections:function(files){for(var i=0,f;f=files[i];i++){var reader=new FileReader();reader.onload=(function(theFile){return function(e){var data=e.currentTarget.result;var collection=JSON.parse(data);collection.id=guid();pm.collections.importCollectionData(collection)}})(f);reader.readAsText(f)}},importCollectionFromUrl:function(url){$.get(url,function(data){var collection=data;collection.id=guid();pm.collections.importCollectionData(collection)})},getCollectionRequest:function(id){$(".sidebar-collection-request").removeClass("sidebar-collection-request-active");$("#sidebar-request-"+id).addClass("sidebar-collection-request-active");
pm.indexedDB.getCollectionRequest(id,function(request){pm.request.isFromCollection=true;pm.request.collectionRequestId=id;pm.request.loadRequestInEditor(request,true)})},loadResponseInEditor:function(id){var responses=pm.request.responses;var responseIndex=find(responses,function(item,i,responses){return item.id===id});var response=responses[responseIndex];pm.request.loadRequestInEditor(response.request,false,true);pm.request.response.render(response)},removeSampleResponse:function(id){var responses=pm.request.responses;var responseIndex=find(responses,function(item,i,responses){return item.id===id});var response=responses[responseIndex];responses.splice(responseIndex,1);pm.indexedDB.getCollectionRequest(response.collectionRequestId,function(request){request["responses"]=responses;pm.indexedDB.updateCollectionRequest(request,function(){$('#request-samples table tr[data-id="'+response.id+'"]').remove()})})},openCollection:function(id){var target="#collection-requests-"+id;if($(target).css("display")==="none"){$(target).slideDown(100,function(){pm.layout.refreshScrollPanes()})}},toggleRequestList:function(id){var target="#collection-requests-"+id;var label="#collection-"+id+" .collection-head-actions .label";if($(target).css("display")==="none"){$(target).slideDown(100,function(){pm.layout.refreshScrollPanes()})}else{$(target).slideUp(100,function(){pm.layout.refreshScrollPanes()})}},addCollection:function(){var newCollection=$("#new-collection-blank").val();var collection=new Collection();if(newCollection){collection.id=guid();collection.name=newCollection;pm.indexedDB.addCollection(collection,function(collection){pm.collections.render(collection)});$("#new-collection-blank").val("")}$("#modal-new-collection").modal("hide")},updateCollectionFromCurrentRequest:function(){var url=$("#url").val();var collectionRequest=new CollectionRequest();collectionRequest.id=pm.request.collectionRequestId;collectionRequest.headers=pm.request.getPackedHeaders();collectionRequest.url=url;collectionRequest.method=pm.request.method;collectionRequest.data=pm.request.body.getData(true);collectionRequest.dataMode=pm.request.dataMode;collectionRequest.version=2;collectionRequest.time=new Date().getTime();pm.indexedDB.getCollectionRequest(collectionRequest.id,function(req){collectionRequest.name=req.name;collectionRequest.description=req.description;collectionRequest.collectionId=req.collectionId;$("#sidebar-request-"+req.id+" .request .label").removeClass("label-method-"+req.method);pm.indexedDB.updateCollectionRequest(collectionRequest,function(request){var requestName;if(request.name==undefined){request.name=request.url}requestName=limitStringLineWidth(request.name,43);$("#sidebar-request-"+request.id+" .request .request-name").html(requestName);$("#sidebar-request-"+request.id+" .request .label").html(request.method);$("#sidebar-request-"+request.id+" .request .label").addClass("label-method-"+request.method);noty({type:"success",text:"Saved request",layout:"topRight",timeout:750})})})},addRequestToCollection:function(){$(".sidebar-collection-request").removeClass("sidebar-collection-request-active");var existingCollectionId=$("#select-collection").val();var newCollection=$("#new-collection").val();var newRequestName=$("#new-request-name").val();var newRequestDescription=$("#new-request-description").val();var url=$("#url").val();if(newRequestName===""){newRequestName=url}var collection=new Collection();var collectionRequest=new CollectionRequest();collectionRequest.id=guid();collectionRequest.headers=pm.request.getPackedHeaders();collectionRequest.url=url;collectionRequest.method=pm.request.method;collectionRequest.data=pm.request.body.getData(true);collectionRequest.dataMode=pm.request.dataMode;collectionRequest.name=newRequestName;collectionRequest.description=newRequestDescription;collectionRequest.time=new Date().getTime();collectionRequest.version=2;collectionRequest.responses=pm.request.responses;if(newCollection){collection.id=guid();collection.name=newCollection;pm.indexedDB.addCollection(collection,function(collection){$("#sidebar-section-collections .empty-message").css("display","none");$("#new-collection").val("");collectionRequest.collectionId=collection.id;$("#select-collection").append(Handlebars.templates.item_collection_selector_list(collection));$("#collection-items").append(Handlebars.templates.item_collection_sidebar_head(collection));$('a[rel="tooltip"]').tooltip();pm.layout.refreshScrollPanes();pm.indexedDB.addCollectionRequest(collectionRequest,function(req){var targetElement="#collection-requests-"+req.collectionId;$("#sidebar-request-"+req.id).addClass("sidebar-collection-request-active");pm.urlCache.addUrl(req.url);if(typeof req.name==="undefined"){req.name=req.url}req.name=limitStringLineWidth(req.name,43);$(targetElement).append(Handlebars.templates.item_collection_sidebar_request(req));pm.layout.refreshScrollPanes();pm.request.isFromCollection=true;pm.request.collectionRequestId=collectionRequest.id;
$("#update-request-in-collection").css("display","inline-block");pm.collections.openCollection(collectionRequest.collectionId)})})}else{collection.id=existingCollectionId;collectionRequest.collectionId=collection.id;pm.indexedDB.addCollectionRequest(collectionRequest,function(req){var targetElement="#collection-requests-"+req.collectionId;pm.urlCache.addUrl(req.url);if(typeof req.name==="undefined"){req.name=req.url}req.name=limitStringLineWidth(req.name,43);$(targetElement).append(Handlebars.templates.item_collection_sidebar_request(req));$("#sidebar-request-"+req.id).addClass("sidebar-collection-request-active");pm.layout.refreshScrollPanes();pm.request.isFromCollection=true;pm.request.collectionRequestId=collectionRequest.id;$("#update-request-in-collection").css("display","inline-block");pm.collections.openCollection(collectionRequest.collectionId);pm.indexedDB.getCollection(collection.id,function(collection){if("order" in collection){collection["order"].push(collectionRequest.id);pm.indexedDB.updateCollection(collection,function(){})}})})}pm.layout.sidebar.select("collections");$("#request-meta").css("display","block");$("#request-name").css("display","block");$("#request-description").css("display","block");$("#request-name").html(newRequestName);$("#request-description").html(newRequestDescription);$('#sidebar-selectors a[data-id="collections"]').tab("show")},getAllCollections:function(){$("#collection-items").html("");$("#select-collection").html("<option>Select</option>");pm.indexedDB.getCollections(function(items){pm.collections.items=items;pm.collections.items.sort(sortAlphabetical);var itemsLength=items.length;if(itemsLength===0){$("#sidebar-section-collections").append(Handlebars.templates.message_no_collection({}))}else{for(var i=0;i<itemsLength;i++){var collection=items[i];pm.indexedDB.getAllRequestsInCollection(collection,function(collection,requests){collection.requests=requests;pm.collections.render(collection)})}}pm.collections.areLoaded=true;pm.layout.refreshScrollPanes()})},handleRequestDropOnCollection:function(event,ui){var id=ui.draggable.context.id;var requestId=$("#"+id+" .request").attr("data-id");var targetCollectionId=$($(event.target).find(".sidebar-collection-head-name")[0]).attr("data-id");pm.indexedDB.getCollection(targetCollectionId,function(collection){pm.indexedDB.getCollectionRequest(requestId,function(collectionRequest){if(targetCollectionId==collectionRequest.collectionId){return}pm.collections.deleteCollectionRequest(requestId);collectionRequest.id=guid();collectionRequest.collectionId=targetCollectionId;pm.indexedDB.addCollectionRequest(collectionRequest,function(req){var targetElement="#collection-requests-"+req.collectionId;pm.urlCache.addUrl(req.url);if(typeof req.name==="undefined"){req.name=req.url}req.name=limitStringLineWidth(req.name,43);$(targetElement).append(Handlebars.templates.item_collection_sidebar_request(req));pm.layout.refreshScrollPanes();$("#update-request-in-collection").css("display","inline-block");pm.collections.openCollection(collectionRequest.collectionId);$("#collection-"+collectionRequest.collectionId+" .sidebar-collection-head").droppable({accept:".sidebar-collection-request",hoverClass:"ui-state-hover",drop:pm.collections.handleRequestDropOnCollection});pm.indexedDB.getCollection(collection.id,function(collection){if("order" in collection){collection["order"].push(collectionRequest.id);pm.indexedDB.updateCollection(collection,function(){})}})})})})},render:function(collection){$("#sidebar-section-collections .empty-message").css("display","none");var currentEl=$("#collection-"+collection.id);if(currentEl){currentEl.remove()}$("#select-collection").append(Handlebars.templates.item_collection_selector_list(collection));$("#collection-items").append(Handlebars.templates.item_collection_sidebar_head(collection));$('a[rel="tooltip"]').tooltip();$("#collection-"+collection.id+" .sidebar-collection-head").droppable({accept:".sidebar-collection-request",hoverClass:"ui-state-hover",drop:pm.collections.handleRequestDropOnCollection});if("requests" in collection){var id=collection.id;var requests=collection.requests;var targetElement="#collection-requests-"+id;var count=requests.length;var requestTargetElement;if(count>0){for(var i=0;i<count;i++){pm.urlCache.addUrl(requests[i].url);if(typeof requests[i].name==="undefined"){requests[i].name=requests[i].url}requests[i].name=limitStringLineWidth(requests[i].name,40);requestTargetElement="#sidebar-request-"+requests[i].id;$(requestTargetElement).draggable({})}if(!("order" in collection)){requests.sort(sortAlphabetical)}else{if(collection["order"].length==requests.length){var orderedRequests=[];for(var j=0,len=collection["order"].length;j<len;j++){var element=_.find(requests,function(request){return request.id==collection["order"][j]});orderedRequests.push(element)}requests=orderedRequests}}$(targetElement).append(Handlebars.templates.collection_sidebar({"items":requests}));$(targetElement).sortable({update:function(event,ui){var target_parent=$(event.target).parents(".sidebar-collection-requests");
var target_parent_collection=$(event.target).parents(".sidebar-collection");var collection_id=$(target_parent_collection).attr("data-id");var ul_id=$(target_parent.context).attr("id");var collection_requests=$(target_parent.context).children("li");var count=collection_requests.length;var order=[];for(var i=0;i<count;i++){var li_id=$(collection_requests[i]).attr("id");var request_id=$("#"+li_id+" .request").attr("data-id");order.push(request_id)}pm.indexedDB.getCollection(collection_id,function(collection){collection["order"]=order;pm.indexedDB.updateCollection(collection,function(collection){})})}})}}pm.layout.refreshScrollPanes()},deleteCollectionRequest:function(id){pm.indexedDB.getCollectionRequest(id,function(request){pm.indexedDB.deleteCollectionRequest(id,function(){pm.layout.sidebar.removeRequestFromHistory(id);pm.indexedDB.getCollection(request.collectionId,function(collection){var order=collection["order"];var index=order.indexOf(id);order.splice(index,1);collection["order"]=order;pm.indexedDB.updateCollection(collection,function(collection){})})})})},updateCollectionMeta:function(id,name){pm.indexedDB.getCollection(id,function(collection){collection.name=name;pm.indexedDB.updateCollection(collection,function(collection){$("#collection-"+collection.id+" .sidebar-collection-head-name").html(collection.name);$('#select-collection option[value="'+collection.id+'"]').html(collection.name)})})},updateCollectionRequestMeta:function(id,name,description){pm.indexedDB.getCollectionRequest(id,function(req){req.name=name;req.description=description;pm.indexedDB.updateCollectionRequest(req,function(newRequest){var requestName;if(req.name!=undefined){requestName=limitStringLineWidth(req.name,43)}else{requestName=limitStringLineWidth(req.url,43)}$("#sidebar-request-"+req.id+" .request .request-name").html(requestName);if(pm.request.collectionRequestId===req.id){$("#request-name").html(req.name);$("#request-description").html(req.description)}$("#modal-edit-collection-request").modal("hide")})})},deleteCollection:function(id){pm.indexedDB.deleteCollection(id,function(){pm.layout.sidebar.removeCollection(id);var target='#select-collection option[value="'+id+'"]';$(target).remove()})},saveResponseAsSample:function(response){pm.indexedDB.getCollectionRequest(response.collectionRequestId,function(request){if("responses" in request&&request["responses"]!==undefined){request["responses"].push(response)}else{request["responses"]=[response]}pm.request.responses=request["responses"];pm.indexedDB.updateCollectionRequest(request,function(){noty({type:"success",text:"Saved response",layout:"topRight",timeout:750});$("#request-samples").css("display","block");$("#request-samples table").append(Handlebars.templates.item_sample_response(response))})})}};pm.editor={mode:"html",codeMirror:null,charCount:0,init:function(){CodeMirror.defineMode("links",function(config,parserConfig){console.log("Defining mode");var linksOverlay={startState:function(){return{"link":""}},token:function(stream,state){if(stream.eatSpace()){return null}var matches;var targetString=stream.string.substr(stream.start);if(matches=targetString.match(/https?:\/\/[^\\'"\n\t\s]*(?=[<"'\n\t\s])/,false)){var m=targetString.match(/.*(?=https?:)/,true);if(m){if(m[0].length>0){stream.next();return null}}var match=matches[0];if(match!=state.link){state.link=matches[0];for(var i=0;i<state.link.length;i++){stream.next()}state.link="";return"link"}stream.skipToEnd();return null}stream.skipToEnd();return null}};return CodeMirror.overlayParser(CodeMirror.getMode(config,parserConfig.backdrop||pm.editor.mode),linksOverlay)})},toggleLineWrapping:function(){var lineWrapping=pm.editor.codeMirror.getOption("lineWrapping");if(lineWrapping===true){$("#response-body-line-wrapping").removeClass("active");lineWrapping=false;pm.editor.codeMirror.setOption("lineWrapping",false)}else{$("#response-body-line-wrapping").addClass("active");lineWrapping=true;pm.editor.codeMirror.setOption("lineWrapping",true)}pm.settings.set("lineWrapping",lineWrapping);pm.editor.codeMirror.refresh()}};pm.envManager={environments:[],globals:{},selectedEnv:null,selectedEnvironmentId:"",quicklook:{init:function(){pm.envManager.quicklook.refreshEnvironment(pm.envManager.selectedEnv);pm.envManager.quicklook.refreshGlobals(pm.envManager.globals)},removeEnvironmentData:function(){$("#environment-quicklook-environments h6").html("Crow environment");$("#environment-quicklook-environments ul").html("")},refreshEnvironment:function(environment){if(!environment){return}$("#environment-quicklook-environments h6").html(environment.name);$("#environment-quicklook-environments ul").html("");$("#environment-quicklook-environments ul").append(Handlebars.templates.environment_quicklook({"items":environment.values}))},refreshGlobals:function(globals){if(!globals){return}$("#environment-quicklook-globals ul").html("");$("#environment-quicklook-globals ul").append(Handlebars.templates.environment_quicklook({"items":globals}))},toggleDisplay:function(){var display=$("#environment-quicklook-content").css("display");
if(display=="none"){$("#environment-quicklook-content").css("display","block")}else{$("#environment-quicklook-content").css("display","none")}}},init:function(){pm.envManager.initGlobals();$("#environment-list").append(Handlebars.templates.environment_list({"items":this.environments}));$("#environments-list").on("click",".environment-action-delete",function(){var id=$(this).attr("data-id");$('a[rel="tooltip"]').tooltip("hide");pm.envManager.deleteEnvironment(id)});$("#environments-list").on("click",".environment-action-edit",function(){var id=$(this).attr("data-id");pm.envManager.showEditor(id)});$("#environments-list").on("click",".environment-action-duplicate",function(){var id=$(this).attr("data-id");pm.envManager.duplicateEnvironment(id)});$("#environments-list").on("click",".environment-action-download",function(){var id=$(this).attr("data-id");pm.envManager.downloadEnvironment(id)});$(".environment-action-back").on("click",function(){pm.envManager.showSelector()});$("#environment-selector").on("click",".environment-list-item",function(){var id=$(this).attr("data-id");var selectedEnv=pm.envManager.getEnvironmentFromId(id);pm.envManager.selectedEnv=selectedEnv;pm.settings.set("selectedEnvironmentId",selectedEnv.id);pm.envManager.quicklook.refreshEnvironment(selectedEnv);$("#environment-selector .environment-list-item-selected").html(selectedEnv.name)});$("#environment-selector").on("click",".environment-list-item-noenvironment",function(){pm.envManager.selectedEnv=null;pm.settings.set("selectedEnvironmentId","");pm.envManager.quicklook.removeEnvironmentData();$("#environment-selector .environment-list-item-selected").html("Crow environment")});$("#environment-quicklook").on("mouseenter",function(){$("#environment-quicklook-content").css("display","block")});$("#environment-quicklook").on("mouseleave",function(){$("#environment-quicklook-content").css("display","none")});$("#environment-files-input").on("change",function(event){var files=event.target.files;pm.envManager.importEnvironments(files);$("#environment-files-input").val("")});$(".environments-actions-add").on("click",function(){pm.envManager.showEditor()});$(".environments-actions-import").on("click",function(){pm.envManager.showImporter()});$(".environments-actions-manage-globals").on("click",function(){pm.envManager.showGlobals()});$(".environments-actions-add-submit").on("click",function(){var id=$("#environment-editor-id").val();if(id==="0"){pm.envManager.addEnvironment()}else{pm.envManager.updateEnvironment()}$("#environment-editor-name").val("");$("#environment-keyvaleditor").keyvalueeditor("reset",[])});$(".environments-actions-add-back").on("click",function(){pm.envManager.saveGlobals();pm.envManager.showSelector();$("#environment-editor-name").val("");$("#environment-keyvaleditor").keyvalueeditor("reset",[])});$("#environments-list-help-toggle").on("click",function(){var d=$("#environments-list-help-detail").css("display");if(d==="none"){$("#environments-list-help-detail").css("display","inline");$(this).html("Hide")}else{$("#environments-list-help-detail").css("display","none");$(this).html("Tell me more")}});var params={placeHolderKey:"Key",placeHolderValue:"Value",deleteButton:'<img class="deleteButton" src="s/pm/img/delete.png">'};$("#environment-keyvaleditor").keyvalueeditor("init",params);$("#globals-keyvaleditor").keyvalueeditor("init",params);$("#globals-keyvaleditor").keyvalueeditor("reset",pm.envManager.globals);pm.envManager.quicklook.init()},getEnvironmentFromId:function(id){var environments=pm.envManager.environments;var count=environments.length;for(var i=0;i<count;i++){var env=environments[i];if(id===env.id){return env}}return false},containsVariable:function(string,values){var variableDelimiter=pm.settings.get("variableDelimiter");var startDelimiter=variableDelimiter.substring(0,2);var endDelimiter=variableDelimiter.substring(variableDelimiter.length-2);var patString=startDelimiter+"[^\r\n]*"+endDelimiter;var pattern=new RegExp(patString,"g");var matches=string.match(pattern);var count=values.length;var variable;if(matches===null){return false}for(var i=0;i<count;i++){variable=startDelimiter+values[i].key+endDelimiter;if(_.indexOf(matches,variable)>=0){return true}}return false},processString:function(string,values){var count=values.length;var finalString=string;var patString;var pattern;var variableDelimiter=pm.settings.get("variableDelimiter");var startDelimiter=variableDelimiter.substring(0,2);var endDelimiter=variableDelimiter.substring(variableDelimiter.length-2);for(var i=0;i<count;i++){patString=startDelimiter+values[i].key+endDelimiter;pattern=new RegExp(patString,"g");finalString=finalString.replace(pattern,values[i].value)}var globals=pm.envManager.globals;count=globals.length;for(i=0;i<count;i++){patString=startDelimiter+globals[i].key+endDelimiter;pattern=new RegExp(patString,"g");finalString=finalString.replace(pattern,globals[i].value)}if(pm.envManager.containsVariable(finalString,values)){finalString=pm.envManager.processString(finalString,values);
return finalString}else{return finalString}},convertString:function(string){var environment=pm.envManager.selectedEnv;var envValues=[];if(environment!==null){envValues=environment.values}return pm.envManager.processString(string,envValues)},getCurrentValue:function(string){var environment=pm.envManager.selectedEnv;var envValues=[];if(environment!==null){envValues=environment.values}return pm.envManager.processString(string,envValues)},getAllEnvironments:function(){pm.indexedDB.environments.getAllEnvironments(function(environments){environments.sort(sortAlphabetical);$("#environment-selector .dropdown-menu").html("");$("#environments-list tbody").html("");pm.envManager.environments=environments;$("#environment-selector .dropdown-menu").append(Handlebars.templates.environment_selector({"items":environments}));$("#environments-list tbody").append(Handlebars.templates.environment_list({"items":environments}));$("#environment-selector .dropdown-menu").append(Handlebars.templates.environment_selector_actions());var selectedEnvId=pm.settings.get("selectedEnvironmentId");var selectedEnv=pm.envManager.getEnvironmentFromId(selectedEnvId);if(selectedEnv){pm.envManager.selectedEnv=selectedEnv;pm.envManager.quicklook.refreshEnvironment(selectedEnv);$("#environment-selector .environment-list-item-selected").html(selectedEnv.name)}else{pm.envManager.selectedEnv=null;$("#environment-selector .environment-list-item-selected").html("Crow environment")}})},initGlobals:function(){if("globals" in localStorage){var globalsString=localStorage["globals"];pm.envManager.globals=JSON.parse(globalsString)}else{pm.envManager.globals=[]}},saveGlobals:function(){var globals=$("#globals-keyvaleditor").keyvalueeditor("getValues");pm.envManager.globals=globals;pm.envManager.quicklook.refreshGlobals(globals);localStorage["globals"]=JSON.stringify(globals)},showSelector:function(){$("#environments-list-wrapper").css("display","block");$("#environment-editor").css("display","none");$("#environment-importer").css("display","none");$("#globals-editor").css("display","none");$(".environments-actions-add-submit").css("display","inline");$("#modal-environments .modal-footer").css("display","none")},showEditor:function(id){if(id){var environment=pm.envManager.getEnvironmentFromId(id);$("#environment-editor-name").val(environment.name);$("#environment-editor-id").val(id);$("#environment-keyvaleditor").keyvalueeditor("reset",environment.values)}else{$("#environment-editor-id").val(0)}$("#environments-list-wrapper").css("display","none");$("#environment-editor").css("display","block");$("#globals-editor").css("display","none");$("#modal-environments .modal-footer").css("display","block")},showImporter:function(){$("#environments-list-wrapper").css("display","none");$("#environment-editor").css("display","none");$("#globals-editor").css("display","none");$("#environment-importer").css("display","block");$(".environments-actions-add-submit").css("display","none");$("#modal-environments .modal-footer").css("display","block")},showGlobals:function(){$("#environments-list-wrapper").css("display","none");$("#environment-editor").css("display","none");$("#globals-editor").css("display","block");$("#environment-importer").css("display","none");$(".environments-actions-add-submit").css("display","none");$("#modal-environments .modal-footer").css("display","block")},addEnvironment:function(){var name=$("#environment-editor-name").val();var values=$("#environment-keyvaleditor").keyvalueeditor("getValues");var environment={id:guid(),name:name,values:values,timestamp:new Date().getTime()};pm.indexedDB.environments.addEnvironment(environment,function(){pm.envManager.getAllEnvironments();pm.envManager.showSelector()})},updateEnvironment:function(){var id=$("#environment-editor-id").val();var name=$("#environment-editor-name").val();var values=$("#environment-keyvaleditor").keyvalueeditor("getValues");var environment={id:id,name:name,values:values,timestamp:new Date().getTime()};pm.indexedDB.environments.updateEnvironment(environment,function(){pm.envManager.getAllEnvironments();pm.envManager.showSelector()})},deleteEnvironment:function(id){pm.indexedDB.environments.deleteEnvironment(id,function(){pm.envManager.getAllEnvironments();pm.envManager.showSelector()})},duplicateEnvironment:function(id){var env=pm.envManager.getEnvironmentFromId(id);env.name=env.name+" "+"copy";env.id=guid();pm.indexedDB.environments.addEnvironment(env,function(){var o={name:env.name,action:"added"};pm.envManager.getAllEnvironments()})},downloadEnvironment:function(id){var env=pm.envManager.getEnvironmentFromId(id);var name=env.name+"-environment.json";var type="application/json";var filedata=JSON.stringify(env);pm.filesystem.saveAndOpenFile(name,filedata,type,function(){})},importEnvironments:function(files){for(var i=0,f;f=files[i];i++){var reader=new FileReader();reader.onload=(function(theFile){return function(e){var data=e.currentTarget.result;var environment=JSON.parse(data);pm.indexedDB.environments.addEnvironment(environment,function(){var o={name:environment.name,action:"added"};
$("#environment-importer-confirmations").append(Handlebars.templates.message_environment_added(o));pm.envManager.getAllEnvironments()})}})(f);reader.readAsText(f)}}};pm.filesystem={fs:{},onInitFs:function(filesystem){pm.filesystem.fs=filesystem},errorHandler:function(e){var msg="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:msg="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:msg="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:msg="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:msg="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:msg="INVALID_STATE_ERR";break;default:msg="Unknown Error";break}console.log("Error: "+msg)},init:function(){window.requestFileSystem(window.TEMPORARY,5*1024*1024,this.onInitFs,this.errorHandler)},removeFileIfExists:function(name,callback){pm.filesystem.fs.root.getFile(name,{create:false},function(fileEntry){fileEntry.remove(function(){callback()},function(){callback()})},function(){callback()})},renderResponsePreview:function(name,data,type,callback){name=encodeURI(name);name=name.replace("/","_");pm.filesystem.removeFileIfExists(name,function(){pm.filesystem.fs.root.getFile(name,{create:true},function(fileEntry){fileEntry.createWriter(function(fileWriter){fileWriter.onwriteend=function(e){var properties={url:fileEntry.toURL()};callback(properties.url)};fileWriter.onerror=function(e){callback(false)};var blob;if(type=="pdf"){blob=new Blob([data],{type:"application/pdf"})}else{blob=new Blob([data],{type:"text/plain"})}fileWriter.write(blob)},pm.filesystem.errorHandler)},pm.filesystem.errorHandler)})}};pm.headerPresets={presets:[],presetsForAutoComplete:[],init:function(){pm.headerPresets.loadPresets();var params={placeHolderKey:"Key",placeHolderValue:"Value",deleteButton:'<img class="deleteButton" src="s/pm/img/delete.png">'};$("#header-presets-keyvaleditor").keyvalueeditor("init",params);$("#headers-keyvaleditor-actions-manage-presets").on("click",function(){pm.headerPresets.showManager()});$(".header-presets-actions-add").on("click",function(){pm.headerPresets.showEditor()});$(".header-presets-actions-back").on("click",function(){pm.headerPresets.showList()});$(".header-presets-actions-submit").on("click",function(){var id=$("#header-presets-editor-id").val();if(id==="0"){pm.headerPresets.addHeaderPreset()}else{var name=$("#header-presets-editor-name").val();var headers=$("#header-presets-keyvaleditor").keyvalueeditor("getValues");pm.headerPresets.editHeaderPreset(id,name,headers)}pm.headerPresets.showList()});$("#header-presets-list").on("click",".header-preset-action-edit",function(){var id=$(this).attr("data-id");var preset=pm.headerPresets.getHeaderPreset(id);$("#header-presets-editor-name").val(preset.name);$("#header-presets-editor-id").val(preset.id);$("#header-presets-keyvaleditor").keyvalueeditor("reset",preset.headers);pm.headerPresets.showEditor()});$("#header-presets-list").on("click",".header-preset-action-delete",function(){var id=$(this).attr("data-id");pm.headerPresets.deleteHeaderPreset(id)})},loadPresets:function(){pm.indexedDB.headerPresets.getAllHeaderPresets(function(items){pm.headerPresets.presets=items;pm.headerPresets.refreshAutoCompleteList();$("#header-presets-list tbody").html("");$("#header-presets-list tbody").append(Handlebars.templates.header_preset_list({"items":items}))})},showManager:function(){$("#modal-header-presets").modal("show")},showList:function(){$("#header-presets-list-wrapper").css("display","block");$("#header-presets-editor").css("display","none");$("#header-presets-editor-name").attr("value","");$("#header-presets-editor-id").attr("value",0);$("#header-presets-keyvaleditor").keyvalueeditor("reset",[]);$("#modal-header-presets .modal-footer").css("display","none")},showEditor:function(){$("#modal-header-presets .modal-footer").css("display","block");$("#header-presets-list-wrapper").css("display","none");$("#header-presets-editor").css("display","block")},getHeaderPreset:function(id){for(var i=0,count=pm.headerPresets.presets.length;i<count;i++){if(pm.headerPresets.presets[i].id===id){break}}var preset=pm.headerPresets.presets[i];return preset},addHeaderPreset:function(){var name=$("#header-presets-editor-name").val();var headers=$("#header-presets-keyvaleditor").keyvalueeditor("getValues");var id=guid();var headerPreset={"id":id,"name":name,"headers":headers,"timestamp":new Date().getTime()};pm.indexedDB.headerPresets.addHeaderPreset(headerPreset,function(){pm.headerPresets.loadPresets()})},editHeaderPreset:function(id,name,headers){pm.indexedDB.headerPresets.getHeaderPreset(id,function(preset){var headerPreset={"id":id,"name":name,"headers":headers,"timestamp":preset.timestamp};pm.indexedDB.headerPresets.updateHeaderPreset(headerPreset,function(){pm.headerPresets.loadPresets()})})},deleteHeaderPreset:function(id){pm.indexedDB.headerPresets.deleteHeaderPreset(id,function(){pm.headerPresets.loadPresets()})},getPresetsForAutoComplete:function(){var list=[];for(var i=0,count=pm.headerPresets.presets.length;
i<count;i++){var preset=pm.headerPresets.presets[i];var item={"id":preset.id,"type":"preset","label":preset.name,"category":"Header presets"};list.push(item)}return list},refreshAutoCompleteList:function(){var presets=pm.headerPresets.getPresetsForAutoComplete();pm.headerPresets.presetsForAutoComplete=_.union(presets,chromeHeaders)}};pm.helpers={activeHelper:"normal",init:function(){$("#request-types .request-helper-tabs li").on("click",function(){$("#request-types .request-helper-tabs li").removeClass("active");$(this).addClass("active");var type=$(this).attr("data-id");pm.helpers.showRequestHelper(type)});$(".request-helper-submit").on("click",function(){var type=$(this).attr("data-type");$("#request-helpers").css("display","none");pm.helpers.processRequestHelper(type)});pm.helpers.oAuth1.init()},processRequestHelper:function(type){if(type==="basic"){this.basic.process()}else{if(type==="oAuth1"){this.oAuth1.process()}else{if(type==="digest"){this.digest.process()}}}return false},showRequestHelper:function(type){pm.helpers.activeHelper=type.toLowerCase();$("#request-types ul li").removeClass("active");$("#request-types ul li[data-id="+type+"]").addClass("active");if(type!=="normal"){$("#request-helpers").css("display","block")}else{$("#request-helpers").css("display","none")}if(type.toLowerCase()==="oauth1"){this.oAuth1.generateHelper()}$(".request-helpers").css("display","none");$("#request-helper-"+type).css("display","block");return false},basic:{process:function(){var headers=pm.request.headers;var authHeaderKey="Authorization";var pos=findPosition(headers,"key",authHeaderKey);var username=$("#request-helper-basicAuth-username").val();var password=$("#request-helper-basicAuth-password").val();username=pm.envManager.convertString(username);password=pm.envManager.convertString(password);var rawString=username+":"+password;var encodedString="Basic "+btoa(rawString);if(pos>=0){headers[pos]={key:authHeaderKey,name:authHeaderKey,value:encodedString}}else{headers.push({key:authHeaderKey,name:authHeaderKey,value:encodedString})}pm.request.headers=headers;$("#headers-keyvaleditor").keyvalueeditor("reset",headers);pm.request.openHeaderEditor()}},digest:{getHeader:function(){var algorithm=pm.envManager.getCurrentValue($("#request-helper-digestAuth-realm").val());var username=pm.envManager.getCurrentValue($("#request-helper-digestAuth-username").val());var realm=pm.envManager.getCurrentValue($("#request-helper-digestAuth-realm").val());var password=pm.envManager.getCurrentValue($("#request-helper-digestAuth-password").val());var method=pm.request.method.toUpperCase();var nonce=pm.envManager.getCurrentValue($("#request-helper-digestAuth-nonce").val());var nonceCount=pm.envManager.getCurrentValue($("#request-helper-digestAuth-nonceCount").val());var clientNonce=pm.envManager.getCurrentValue($("#request-helper-digestAuth-clientNonce").val());var opaque=pm.envManager.getCurrentValue($("#request-helper-digestAuth-opaque").val());var qop=pm.envManager.getCurrentValue($("#request-helper-digestAuth-qop").val());var body=pm.request.getRequestBodyPreview();var url=pm.request.processUrl($("#url").val());var urlParts=pm.request.splitUrlIntoHostAndPath(url);var digestUri=urlParts.path;console.log(algorithm);console.log(username);console.log(realm);console.log(password);console.log(method);console.log(nonce);console.log(nonceCount);console.log(clientNonce);console.log(opaque);console.log(qop);console.log(body);var a1;if(algorithm==="MD5-sess"){var a0=CryptoJS.MD5(username+":"+realm+":"+password);a1=a0+":"+nonce+":"+clientNonce}else{console.log(algorithm,"MD5");a1=username+":"+realm+":"+password;console.log(a1)}var a2;if(qop==="auth-int"){a2=method+":"+digestUri+":"+body}else{a2=method+":"+digestUri;console.log(qop,a2)}var ha1=CryptoJS.MD5(a1);var ha2=CryptoJS.MD5(a2);var response;if(qop==="auth-int"||qop==="auth"){response=CryptoJS.MD5(ha1+":"+nonce+":"+nonceCount+":"+clientNonce+":"+qop+":"+ha2);console.log(response)}else{response=CryptoJS.MD5(ha1+":"+nonce+":"+ha2)}var headerVal=" ";headerVal+='username="'+username+'", ';headerVal+='realm="'+realm+'", ';headerVal+='nonce="'+nonce+'", ';headerVal+='uri="'+digestUri+'", ';if(qop==="auth"||qop==="auth-int"){headerVal+="qop="+qop+", "}if(qop==="auth"||qop==="auth-int"||algorithm==="MD5-sess"){headerVal+="nc="+nonceCount+", ";headerVal+='cnonce="'+clientNonce+'", '}headerVal+='response="'+response+'", ';headerVal+='opaque="'+opaque+'"';return headerVal},process:function(){var headers=pm.request.headers;var authHeaderKey="Authorization";var pos=findPosition(headers,"key",authHeaderKey);var algorithm=$("#request-helper-digestAuth-realm").val();var headerVal;headerVal=pm.helpers.digest.getHeader();headerVal="Digest"+headerVal;if(pos>=0){headers[pos]={key:authHeaderKey,name:authHeaderKey,value:headerVal}}else{headers.push({key:authHeaderKey,name:authHeaderKey,value:headerVal})}pm.request.headers=headers;$("#headers-keyvaleditor").keyvalueeditor("reset",headers);pm.request.openHeaderEditor()
}},oAuth1:{isAutoEnabled:false,init:function(){$("#request-helper-oauth1-auto").click(function(){var isAutoEnabled=$("#request-helper-oauth1-auto").attr("checked")?true:false;pm.helpers.oAuth1.isAutoEnabled=isAutoEnabled;if(!isAutoEnabled){$("#request-helper-oAuth1 .request-helper-submit").css("display","inline-block")}else{$("#request-helper-oAuth1 .request-helper-submit").css("display","none")}})},generateHelper:function(){$("#request-helper-oauth1-timestamp").val(OAuth.timestamp());$("#request-helper-oauth1-nonce").val(OAuth.nonce(6))},generateSignature:function(){if($("#url").val()===""){$("#request-helpers").css("display","block");alert("Please enter the URL first.");return null}var processedUrl;var realm=$("#request-helper-oauth1-realm").val();if(realm===""){processedUrl=pm.envManager.convertString($("#url").val()).trim()}else{processedUrl=pm.envManager.convertString(realm)}processedUrl=ensureProperUrl(processedUrl);if(processedUrl.indexOf("?")>0){processedUrl=processedUrl.split("?")[0]}var message={action:processedUrl,method:pm.request.method,parameters:[]};$("input.signatureParam").each(function(){if($(this).val()!=""||$("#request-helper-keep-empty-parameters").attr("checked")){var val=$(this).val();val=pm.envManager.convertString(val);message.parameters.push([$(this).attr("key"),val])}});var urlParams=$("#url-keyvaleditor").keyvalueeditor("getValues");var bodyParams=[];if(pm.request.isMethodWithBody(pm.request.method)){if(pm.request.body.mode=="params"){bodyParams=$("#formdata-keyvaleditor").keyvalueeditor("getValues")}else{if(pm.request.body.mode=="urlencoded"){bodyParams=$("#urlencoded-keyvaleditor").keyvalueeditor("getValues")}}}var params=urlParams.concat(bodyParams);for(var i=0;i<params.length;i++){var param=params[i];if(param.key){param.value=pm.envManager.convertString(param.value);message.parameters.push([param.key,param.value])}}var accessor={};if($('input[key="oauth_consumer_secret"]').val()!=""){accessor.consumerSecret=$('input[key="oauth_consumer_secret"]').val();accessor.consumerSecret=pm.envManager.convertString(accessor.consumerSecret)}if($('input[key="oauth_token_secret"]').val()!=""){accessor.tokenSecret=$('input[key="oauth_token_secret"]').val();accessor.tokenSecret=pm.envManager.convertString(accessor.tokenSecret)}return OAuth.SignatureMethod.sign(message,accessor)},removeOAuthKeys:function(params){var i,count;var oauthParams=["oauth_consumer_key","oauth_token","oauth_signature_method","oauth_timestamp","oauth_nonce","oauth_version","oauth_signature"];var newParams=[];var oauthIndexes=[];for(i=0,count=params.length;i<count;i++){var index=_.indexOf(oauthParams,params[i].key);if(index<0){newParams.push(params[i])}}return newParams},process:function(){var i,count,length;var params=[];var urlParams=pm.request.getUrlEditorParams();var bodyParams=[];if(pm.request.body.mode==="params"){bodyParams=$("#formdata-keyvaleditor").keyvalueeditor("getValues")}else{if(pm.request.body.mode==="urlencoded"){bodyParams=$("#urlencoded-keyvaleditor").keyvalueeditor("getValues")}}params=params.concat(urlParams);params=params.concat(bodyParams);params=pm.helpers.oAuth1.removeOAuthKeys(params);var signatureKey="oauth_signature";$("input.signatureParam").each(function(){if($(this).val()!=""||$("#request-helper-keep-empty-parameters").attr("checked")){var val=$(this).val();params.push({key:$(this).attr("key"),value:val})}});for(i=0,length=params.length;i<length;i++){params[i].value=pm.envManager.convertString(params[i].value)}var signature=this.generateSignature();if(signature==null){return}params.push({key:signatureKey,value:signature});var addToHeader=$("#request-helper-oauth1-header").attr("checked")?true:false;if(addToHeader){var realm=$("#request-helper-oauth1-realm").val();if(realm===""){realm=pm.envManager.convertString($("#url").val()).trim()}if(realm.indexOf("?")>0){realm=realm.split("?")[0]}var headers=pm.request.headers;var authHeaderKey="Authorization";var pos=findPosition(headers,"key",authHeaderKey);var rawString='OAuth realm="'+realm+'",';var len=params.length;for(i=0;i<len;i++){rawString+=encodeURIComponent(params[i].key)+'="'+encodeURIComponent(params[i].value)+'",'}rawString=rawString.substring(0,rawString.length-1);if(pos>=0){headers[pos]={key:authHeaderKey,name:authHeaderKey,value:rawString}}else{headers.push({key:authHeaderKey,name:authHeaderKey,value:rawString})}pm.request.headers=headers;$("#headers-keyvaleditor").keyvalueeditor("reset",headers);pm.request.openHeaderEditor()}else{if(pm.request.method==="GET"){$("#url-keyvaleditor").keyvalueeditor("reset",params);pm.request.setUrlParamString(params);pm.request.openUrlEditor()}else{var dataMode=pm.request.body.getDataMode();if(dataMode==="urlencoded"){$("#urlencoded-keyvaleditor").keyvalueeditor("reset",params)}else{if(dataMode==="params"){$("#formdata-keyvaleditor").keyvalueeditor("reset",params)}}}}}}};pm.history={requests:{},init:function(){$(".history-actions-delete").click(function(){pm.history.clear()})},showEmptyMessage:function(){$("#emptyHistoryMessage").css("display","block")
},hideEmptyMessage:function(){$("#emptyHistoryMessage").css("display","none")},requestExists:function(request){var index=-1;var method=request.method.toLowerCase();if(pm.request.isMethodWithBody(method)){return -1}var requests=this.requests;var len=requests.length;for(var i=0;i<len;i++){var r=requests[i];if(r.url.length!==request.url.length||r.headers.length!==request.headers.length||r.method!==request.method){index=-1}else{if(r.url===request.url){if(r.headers===request.headers){index=i}}}if(index>=0){break}}return index},getAllRequests:function(){pm.indexedDB.getAllRequestItems(function(historyRequests){var outAr=[];var count=historyRequests.length;if(count===0){$("#sidebar-section-history").append(Handlebars.templates.message_no_history({}))}else{for(var i=0;i<count;i++){var r=historyRequests[i];pm.urlCache.addUrl(r.url);var url=historyRequests[i].url;if(url.length>80){url=url.substring(0,80)+"..."}url=limitStringLineWidth(url,40);var request={url:url,method:historyRequests[i].method,id:historyRequests[i].id,position:"top"};outAr.push(request)}outAr.reverse();$("#history-items").append(Handlebars.templates.history_sidebar_requests({"items":outAr}));$("#history-items").fadeIn()}pm.history.requests=historyRequests;pm.layout.refreshScrollPanes()})},loadRequest:function(id){pm.indexedDB.getRequest(id,function(request){pm.request.isFromCollection=false;$(".sidebar-collection-request").removeClass("sidebar-collection-request-active");pm.request.loadRequestInEditor(request)})},addRequest:function(url,method,headers,data,dataMode){var id=guid();var maxHistoryCount=pm.settings.get("historyCount");var requests=this.requests;var requestsCount=this.requests.length;if(maxHistoryCount>0){if(requestsCount>=maxHistoryCount){var lastRequest=requests[0];this.deleteRequest(lastRequest.id)}}var historyRequest={"id":id,"url":url.toString(),"method":method.toString(),"headers":headers.toString(),"data":data,"dataMode":dataMode.toString(),"timestamp":new Date().getTime(),"version":2};var index=this.requestExists(historyRequest);if(index>=0){var deletedId=requests[index].id;this.deleteRequest(deletedId)}pm.indexedDB.addRequest(historyRequest,function(request){pm.urlCache.addUrl(request.url);pm.layout.sidebar.addRequest(request.url,request.method,id,"top");pm.history.requests.push(request)})},deleteRequest:function(id){pm.indexedDB.deleteRequest(id,function(request_id){var historyRequests=pm.history.requests;var k=-1;var len=historyRequests.length;for(var i=0;i<len;i++){if(historyRequests[i].id===request_id){k=i;break}}if(k>=0){historyRequests.splice(k,1)}pm.layout.sidebar.removeRequestFromHistory(request_id)})},clear:function(){pm.indexedDB.deleteHistory(function(){$("#history-items").html("")})}};pm.indexedDB={TABLE_HEADER_PRESETS:"header_presets",onerror:function(event,callback){console.log(event)},open_v21:function(){var indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB;var request=indexedDB.open("postman","POSTman request history");request.onsuccess=function(e){var v="0.6";pm.indexedDB.db=e.target.result;var db=pm.indexedDB.db;if(v!==db.version){var setVrequest=db.setVersion(v);setVrequest.onfailure=function(e){console.log(e)};setVrequest.onsuccess=function(event){if(!db.objectStoreNames.contains("requests")){var requestStore=db.createObjectStore("requests",{keyPath:"id"});requestStore.createIndex("timestamp","timestamp",{unique:false})}if(!db.objectStoreNames.contains("collections")){var collectionsStore=db.createObjectStore("collections",{keyPath:"id"});collectionsStore.createIndex("timestamp","timestamp",{unique:false})}if(!db.objectStoreNames.contains("collection_requests")){var collectionRequestsStore=db.createObjectStore("collection_requests",{keyPath:"id"});collectionRequestsStore.createIndex("timestamp","timestamp",{unique:false});collectionRequestsStore.createIndex("collectionId","collectionId",{unique:false})}if(db.objectStoreNames.contains("collection_responses")){db.deleteObjectStore("collection_responses")}if(!db.objectStoreNames.contains("environments")){var environmentsStore=db.createObjectStore("environments",{keyPath:"id"});environmentsStore.createIndex("timestamp","timestamp",{unique:false});environmentsStore.createIndex("id","id",{unique:false})}if(!db.objectStoreNames.contains("header_presets")){var requestStore=db.createObjectStore("header_presets",{keyPath:"id"});requestStore.createIndex("timestamp","timestamp",{unique:false})}var transaction=event.target.result;transaction.oncomplete=function(){pm.history.getAllRequests();pm.envManager.getAllEnvironments();pm.headerPresets.init()}};setVrequest.onupgradeneeded=function(evt){}}else{pm.history.getAllRequests();pm.envManager.getAllEnvironments();pm.headerPresets.init()}};request.onfailure=pm.indexedDB.onerror},open_latest:function(){var indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB;var v=11;var request=indexedDB.open("postman",v);request.onupgradeneeded=function(e){var db=e.target.result;pm.indexedDB.db=db;if(!db.objectStoreNames.contains("requests")){var requestStore=db.createObjectStore("requests",{keyPath:"id"});
requestStore.createIndex("timestamp","timestamp",{unique:false})}if(!db.objectStoreNames.contains("collections")){var collectionsStore=db.createObjectStore("collections",{keyPath:"id"});collectionsStore.createIndex("timestamp","timestamp",{unique:false})}if(!db.objectStoreNames.contains("collection_requests")){var collectionRequestsStore=db.createObjectStore("collection_requests",{keyPath:"id"});collectionRequestsStore.createIndex("timestamp","timestamp",{unique:false});collectionRequestsStore.createIndex("collectionId","collectionId",{unique:false})}if(db.objectStoreNames.contains("collection_responses")){db.deleteObjectStore("collection_responses")}if(!db.objectStoreNames.contains("environments")){var environmentsStore=db.createObjectStore("environments",{keyPath:"id"});environmentsStore.createIndex("timestamp","timestamp",{unique:false});environmentsStore.createIndex("id","id",{unique:false})}if(!db.objectStoreNames.contains("header_presets")){var requestStore=db.createObjectStore("header_presets",{keyPath:"id"});requestStore.createIndex("timestamp","timestamp",{unique:false})}};request.onsuccess=function(e){pm.indexedDB.db=e.target.result;pm.history.getAllRequests();pm.envManager.getAllEnvironments();pm.headerPresets.init()};request.onerror=pm.indexedDB.onerror},open:function(){if(parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2])<23){pm.indexedDB.open_v21()}else{pm.indexedDB.open_latest()}},addCollection:function(collection,callback){var db=pm.indexedDB.db;var trans=db.transaction(["collections"],"readwrite");var store=trans.objectStore("collections");var request;if("order" in collection){request=store.put({"id":collection.id,"name":collection.name,"order":collection.order,"timestamp":new Date().getTime()})}else{request=store.put({"id":collection.id,"name":collection.name,"timestamp":new Date().getTime()})}request.onsuccess=function(){callback(collection)};request.onerror=function(e){console.log(e.value)}},updateCollection:function(collection,callback){var db=pm.indexedDB.db;var trans=db.transaction(["collections"],"readwrite");var store=trans.objectStore("collections");var boundKeyRange=IDBKeyRange.only(collection.id);var request=store.put(collection);request.onsuccess=function(e){callback(collection)};request.onerror=function(e){console.log(e.value)}},addCollectionRequest:function(req,callback){var db=pm.indexedDB.db;var trans=db.transaction(["collection_requests"],"readwrite");var store=trans.objectStore("collection_requests");var version;if("version" in req){version=req.version}else{version=1}var collectionRequest=store.put({"collectionId":req.collectionId,"id":req.id,"name":req.name,"description":req.description,"url":req.url.toString(),"method":req.method.toString(),"headers":req.headers.toString(),"data":req.data,"dataMode":req.dataMode.toString(),"timestamp":req.timestamp,"responses":req.responses,"version":req.version});collectionRequest.onsuccess=function(){callback(req)};collectionRequest.onerror=function(e){console.log(e.value)}},updateCollectionRequest:function(req,callback){var db=pm.indexedDB.db;var trans=db.transaction(["collection_requests"],"readwrite");var store=trans.objectStore("collection_requests");var boundKeyRange=IDBKeyRange.only(req.id);var request=store.put(req);request.onsuccess=function(e){callback(req)};request.onerror=function(e){console.log(e.value)}},getCollection:function(id,callback){var db=pm.indexedDB.db;var trans=db.transaction(["collections"],"readwrite");var store=trans.objectStore("collections");var cursorRequest=store.get(id);cursorRequest.onsuccess=function(e){var result=e.target.result;callback(result)};cursorRequest.onerror=pm.indexedDB.onerror},getCollections:function(callback){var db=pm.indexedDB.db;if(db==null){return}var trans=db.transaction(["collections"],"readwrite");var store=trans.objectStore("collections");var keyRange=IDBKeyRange.lowerBound(0);var cursorRequest=store.openCursor(keyRange);var numCollections=0;var items=[];cursorRequest.onsuccess=function(e){var result=e.target.result;if(!result){callback(items);return}var collection=result.value;numCollections++;items.push(collection);result["continue"]()};cursorRequest.onerror=function(e){console.log(e)}},getAllRequestsInCollection:function(collection,callback){var db=pm.indexedDB.db;var trans=db.transaction(["collection_requests"],"readwrite");var keyRange=IDBKeyRange.only(collection.id);var store=trans.objectStore("collection_requests");var index=store.index("collectionId");var cursorRequest=index.openCursor(keyRange);var requests=[];cursorRequest.onsuccess=function(e){var result=e.target.result;if(!result){callback(collection,requests);return}var request=result.value;requests.push(request);result["continue"]()};cursorRequest.onerror=pm.indexedDB.onerror},addRequest:function(historyRequest,callback){var db=pm.indexedDB.db;var trans=db.transaction(["requests"],"readwrite");var store=trans.objectStore("requests");var request=store.put(historyRequest);request.onsuccess=function(e){callback(historyRequest)
};request.onerror=function(e){console.log(e.value)}},getRequest:function(id,callback){var db=pm.indexedDB.db;var trans=db.transaction(["requests"],"readwrite");var store=trans.objectStore("requests");var cursorRequest=store.get(id);cursorRequest.onsuccess=function(e){var result=e.target.result;if(!result){return}callback(result)};cursorRequest.onerror=pm.indexedDB.onerror},getCollectionRequest:function(id,callback){var db=pm.indexedDB.db;var trans=db.transaction(["collection_requests"],"readwrite");var store=trans.objectStore("collection_requests");var cursorRequest=store.get(id);cursorRequest.onsuccess=function(e){var result=e.target.result;if(!result){return}callback(result);return result};cursorRequest.onerror=pm.indexedDB.onerror},getAllRequestItems:function(callback){var db=pm.indexedDB.db;if(db==null){return}var trans=db.transaction(["requests"],"readwrite");var store=trans.objectStore("requests");var keyRange=IDBKeyRange.lowerBound(0);var index=store.index("timestamp");var cursorRequest=index.openCursor(keyRange);var historyRequests=[];cursorRequest.onsuccess=function(e){var result=e.target.result;if(!result){callback(historyRequests);return}var request=result.value;historyRequests.push(request);result["continue"]()};cursorRequest.onerror=pm.indexedDB.onerror},deleteRequest:function(id,callback){try{var db=pm.indexedDB.db;var trans=db.transaction(["requests"],"readwrite");var store=trans.objectStore(["requests"]);var request=store["delete"](id);request.onsuccess=function(){callback(id)};request.onerror=function(e){console.log(e)}}catch(e){console.log(e)}},deleteHistory:function(callback){var db=pm.indexedDB.db;var clearTransaction=db.transaction(["requests"],"readwrite");var clearRequest=clearTransaction.objectStore(["requests"]).clear();clearRequest.onsuccess=function(event){callback()}},deleteCollectionRequest:function(id,callback){var db=pm.indexedDB.db;var trans=db.transaction(["collection_requests"],"readwrite");var store=trans.objectStore(["collection_requests"]);var request=store["delete"](id);request.onsuccess=function(e){callback(id)};request.onerror=function(e){console.log(e)}},deleteAllCollectionRequests:function(id){var db=pm.indexedDB.db;var trans=db.transaction(["collection_requests"],"readwrite");var keyRange=IDBKeyRange.only(id);var store=trans.objectStore("collection_requests");var index=store.index("collectionId");var cursorRequest=index.openCursor(keyRange);cursorRequest.onsuccess=function(e){var result=e.target.result;if(!result){return}var request=result.value;pm.collections.deleteCollectionRequest(request.id);result["continue"]()};cursorRequest.onerror=pm.indexedDB.onerror},deleteCollection:function(id,callback){var db=pm.indexedDB.db;var trans=db.transaction(["collections"],"readwrite");var store=trans.objectStore(["collections"]);var request=store["delete"](id);request.onsuccess=function(){pm.indexedDB.deleteAllCollectionRequests(id);callback(id)};request.onerror=function(e){console.log(e)}},environments:{addEnvironment:function(environment,callback){var db=pm.indexedDB.db;var trans=db.transaction(["environments"],"readwrite");var store=trans.objectStore("environments");var request=store.put(environment);request.onsuccess=function(e){callback(environment)};request.onerror=function(e){console.log(e)}},getEnvironment:function(id,callback){var db=pm.indexedDB.db;var trans=db.transaction(["environments"],"readwrite");var store=trans.objectStore("environments");var cursorRequest=store.get(id);cursorRequest.onsuccess=function(e){var result=e.target.result;callback(result)};cursorRequest.onerror=pm.indexedDB.onerror},deleteEnvironment:function(id,callback){var db=pm.indexedDB.db;var trans=db.transaction(["environments"],"readwrite");var store=trans.objectStore(["environments"]);var request=store["delete"](id);request.onsuccess=function(){callback(id)};request.onerror=function(e){console.log(e)}},getAllEnvironments:function(callback){var db=pm.indexedDB.db;if(db==null){return}var trans=db.transaction(["environments"],"readwrite");var store=trans.objectStore("environments");var keyRange=IDBKeyRange.lowerBound(0);var index=store.index("timestamp");var cursorRequest=index.openCursor(keyRange);var environments=[];cursorRequest.onsuccess=function(e){var result=e.target.result;if(!result){callback(environments);return}var request=result.value;environments.push(request);result["continue"]()};cursorRequest.onerror=pm.indexedDB.onerror},updateEnvironment:function(environment,callback){var db=pm.indexedDB.db;var trans=db.transaction(["environments"],"readwrite");var store=trans.objectStore("environments");var boundKeyRange=IDBKeyRange.only(environment.id);var request=store.put(environment);request.onsuccess=function(e){callback(environment)};request.onerror=function(e){console.log(e.value)}}},headerPresets:{addHeaderPreset:function(headerPreset,callback){var db=pm.indexedDB.db;var trans=db.transaction([pm.indexedDB.TABLE_HEADER_PRESETS],"readwrite");var store=trans.objectStore(pm.indexedDB.TABLE_HEADER_PRESETS);
var request=store.put(headerPreset);request.onsuccess=function(e){callback(headerPreset)};request.onerror=function(e){console.log(e)}},getHeaderPreset:function(id,callback){var db=pm.indexedDB.db;var trans=db.transaction([pm.indexedDB.TABLE_HEADER_PRESETS],"readwrite");var store=trans.objectStore(pm.indexedDB.TABLE_HEADER_PRESETS);var cursorRequest=store.get(id);cursorRequest.onsuccess=function(e){var result=e.target.result;callback(result)};cursorRequest.onerror=pm.indexedDB.onerror},deleteHeaderPreset:function(id,callback){var db=pm.indexedDB.db;var trans=db.transaction([pm.indexedDB.TABLE_HEADER_PRESETS],"readwrite");var store=trans.objectStore([pm.indexedDB.TABLE_HEADER_PRESETS]);var request=store["delete"](id);request.onsuccess=function(){callback(id)};request.onerror=function(e){console.log(e)}},getAllHeaderPresets:function(callback){var db=pm.indexedDB.db;if(db==null){console.log("Db is null");return}var trans=db.transaction([pm.indexedDB.TABLE_HEADER_PRESETS],"readwrite");var store=trans.objectStore(pm.indexedDB.TABLE_HEADER_PRESETS);var keyRange=IDBKeyRange.lowerBound(0);var index=store.index("timestamp");var cursorRequest=index.openCursor(keyRange);var headerPresets=[];cursorRequest.onsuccess=function(e){var result=e.target.result;if(!result){callback(headerPresets);return}var request=result.value;headerPresets.push(request);result["continue"]()};cursorRequest.onerror=pm.indexedDB.onerror},updateHeaderPreset:function(headerPreset,callback){var db=pm.indexedDB.db;var trans=db.transaction([pm.indexedDB.TABLE_HEADER_PRESETS],"readwrite");var store=trans.objectStore(pm.indexedDB.TABLE_HEADER_PRESETS);var boundKeyRange=IDBKeyRange.only(headerPreset.id);var request=store.put(headerPreset);request.onsuccess=function(e){callback(headerPreset)};request.onerror=function(e){console.log(e.value)}}}};pm.jsonlint={instance:null,init:function(){pm.jsonlint.instance=jsonlint_postman;jsonlint_postman=null}};pm.keymap={init:function(){var clearHistoryHandler=function(){if(pm.layout.isModalOpen){return}pm.history.clear();return false};var urlFocusHandler=function(){if(pm.layout.isModalOpen){return}$("#url").focus();return false};var newRequestHandler=function(){if(pm.layout.isModalOpen){return}pm.request.startNew()};$("body").on("keydown","input",function(event){if(pm.layout.isModalOpen){return}if(event.keyCode===27){$(event.target).blur()}else{if(event.keyCode==13){pm.request.send("text")}}return true});$("body").on("keydown","textarea",function(event){if(pm.layout.isModalOpen){return}if(event.keyCode===27){$(event.target).blur()}});$("body").on("keydown","select",function(event){if(event.keyCode===27){$(event.target).blur()}});$(document).bind("keydown","alt+c",clearHistoryHandler);$(document).bind("keydown","backspace",urlFocusHandler);$(document).bind("keydown","alt+n",newRequestHandler);$(document).bind("keydown","alt+p",function(){pm.request.handlePreviewClick()});$(document).bind("keydown","q",function(){pm.envManager.quicklook.toggleDisplay();return false});$(document).bind("keydown","e",function(){if(pm.layout.isModalOpen){return}$("#modal-environments").modal({keyboard:true,backdrop:"static"})});$(document).bind("keydown","h",function(){if(pm.layout.isModalOpen){return}pm.request.openHeaderEditor();$("#headers-keyvaleditor div:first-child input:first-child").focus();return false});$(document).bind("keydown","return",function(){if(pm.layout.isModalOpen){return}pm.request.send("text");return false});$(document).bind("keydown","p",function(){if(pm.layout.isModalOpen){return}if(pm.request.isMethodWithBody(pm.request.method)){$("#formdata-keyvaleditor div:first-child input:first-child").focus();return false}});$(document).bind("keydown","f",function(){if(pm.layout.isModalOpen){return}pm.request.response.toggleBodySize()});$(document).bind("keydown","esc",function(){if(pm.layout.isModalOpen){var activeModal=pm.layout.activeModal;if(activeModal!==""){$(activeModal).modal("hide")}}});$(document).bind("keydown","shift+/",function(){if(pm.layout.isModalOpen){return}$("#modal-shortcuts").modal({keyboard:true});$("#modal-shortcuts").modal("show")});$(document).bind("keydown","a",function(){if(pm.layout.isModalOpen){return}if(pm.collections.areLoaded===false){pm.collections.getAllCollections()}$("#modal-add-to-collection").modal({keyboard:true,backdrop:"static"});$("#modal-add-to-collection").modal("show");$("#new-request-name").val("");$("#new-request-description").val("");return false})}};pm.layout={isModalOpen:false,activeModal:"",detectLauncher:function(){if(pm.debug){return}var launcherNotificationCount=pm.settings.get("launcherNotificationCount");var maxCount=1;if(launcherNotificationCount>=1){return true}var extension_id="igofndmniooofoabmmpfonmdnhgchoka";var extension_url="https://chrome.google.com/webstore/detail/"+extension_id;noty({type:"information",text:"Click here to get the Postman Launcher for quick access to Postman from the Chrome toolbar",layout:"topRight",callback:{onClose:function(){var url="https://chrome.google.com/webstore/detail/postman-launcher/igofndmniooofoabmmpfonmdnhgchoka";
window.open(url,"_blank");window.focus()}}});var launcherNotificationCount=parseInt(pm.settings.get("launcherNotificationCount"))+1;pm.settings.set("launcherNotificationCount",launcherNotificationCount)},init:function(){pm.layout.detectLauncher();if(pm.settings.get("haveDonated")==true){console.log("Donated");pm.layout.hideDonationBar()}$("#donate").on("click",function(){$("#donate-form form").submit()});$("#postman-wiki").on("click",function(){tracker.sendEvent("wiki","click")});$("#upgrade").on("click",function(){tracker.sendEvent("upgrade","click")});$("#upgrade").popover();$(".banner-close").tooltip();$("#response-body-toggle").on("click",function(){pm.request.response.toggleBodySize()});$("#response-body-line-wrapping").on("click",function(){pm.editor.toggleLineWrapping();return true});$("#response-formatting").on("click","a",function(){var previewType=$(this).attr("data-type");pm.request.response.changePreviewType(previewType)});$("#response-language").on("click","a",function(){var language=$(this).attr("data-mode");pm.request.response.setMode(language)});$("#response-sample-save-start").on("click",function(){$("#response-sample-save-start-container").css("display","none");$("#response-sample-save-form").css("display","inline-block")});$("#response-sample-cancel").on("click",function(){$("#response-sample-save-start-container").css("display","inline-block");$("#response-sample-save-form").css("display","none")});$("#response-sample-save").on("click",function(){var url=$("#url").val();var currentResponse=pm.request.response;var request=new CollectionRequest();request.id=guid();request.headers=pm.request.getPackedHeaders();request.url=url;request.method=pm.request.method;request.data=pm.request.body.getData();request.dataMode=pm.request.dataMode;request.time=new Date().getTime();var name=$("#response-sample-name").val();var response={"id":guid(),"name":name,"collectionRequestId":pm.request.collectionRequestId,"request":request,"responseCode":currentResponse.responseCode,"time":currentResponse.time,"headers":currentResponse.headers,"cookies":currentResponse.cookies,"text":currentResponse.text};pm.collections.saveResponseAsSample(response);$("#response-sample-save-start-container").css("display","inline-block");$("#response-sample-save-form").css("display","none")});this.sidebar.init();pm.request.response.clear();$("#sidebar-selectors li a").click(function(){var id=$(this).attr("data-id");pm.layout.sidebar.select(id)});$('a[rel="tooltip"]').tooltip();$('input[rel="popover"]').popover();$("#form-add-to-collection").submit(function(){pm.collections.addRequestToCollection();$("#modal-add-to-collection").modal("hide");return false});$("#modal-add-to-collection .btn-primary").click(function(){pm.collections.addRequestToCollection();$("#modal-add-to-collection").modal("hide")});$("#form-new-collection").submit(function(){pm.collections.addCollection();return false});$("#form-edit-collection").submit(function(){var id=$("#form-edit-collection .collection-id").val();var name=$("#form-edit-collection .collection-name").val();pm.collections.updateCollection(id,name);$("#modal-edit-collection").modal("hide");return false});$("#form-edit-collection-request").submit(function(){var id=$("#form-edit-collection-request .collection-request-id").val();var name=$("#form-edit-collection-request .collection-request-name").val();var description=$("#form-edit-collection-request .collection-request-description").val();pm.collections.updateCollectionRequestMeta(id,name,description);return false});$("#modal-new-collection .btn-primary").click(function(){pm.collections.addCollection();return false});$("#modal-edit-collection .btn-primary").click(function(){var id=$("#form-edit-collection .collection-id").val();var name=$("#form-edit-collection .collection-name").val();pm.collections.updateCollectionMeta(id,name);$("#modal-edit-collection").modal("hide")});$("#modal-edit-collection-request .btn-primary").click(function(){var id=$("#form-edit-collection-request .collection-request-id").val();var name=$("#form-edit-collection-request .collection-request-name").val();var description=$("#form-edit-collection-request .collection-request-description").val();pm.collections.updateCollectionRequestMeta(id,name,description)});$(window).resize(function(){pm.layout.setLayout()});$("#response-data").on("mousedown",".cm-link",function(){var link=$(this).html();var headers=$("#headers-keyvaleditor").keyvalueeditor("getValues");pm.request.loadRequestFromLink(link,headers)});$("#response-headers").on("mousedown",".cm-link",function(){var link=$(this).text();var headers=$("#headers-keyvaleditor").keyvalueeditor("getValues");pm.request.loadRequestFromLink(link,headers)});$(".response-tabs").on("click","li",function(){var section=$(this).attr("data-section");if(section==="body"){pm.request.response.showBody()}else{if(section==="headers"){pm.request.response.showHeaders()}else{if(section==="cookies"){pm.request.response.showCookies()}}}});$("#request-meta").on("mouseenter",function(){$(".request-meta-actions").css("display","block")
});$("#request-meta").on("mouseleave",function(){$(".request-meta-actions").css("display","none")});var linkRegex=/(\s*<\s*)([^>]*)(\s*>[^,]*,?)/g;var linkFunc=function(all,pre_uri,uri,post_uri){return Handlebars.Utils.escapeExpression(pre_uri)+'<span class="cm-link">'+uri+"</span>"+Handlebars.Utils.escapeExpression(post_uri)};Handlebars.registerHelper("link_to_hyperlink",function(linkValue){var output=linkValue.replace(linkRegex,linkFunc);return new Handlebars.SafeString(output)});this.attachModalHandlers();this.setLayout();this.showV3Onboarding()},showV3Onboarding:function(){var warningBannerDismissed=false;if(!warningBannerDismissed){this.initV3BannerPopover()}else{this.initV3SidebarPopover()}},initV3BannerPopover:function(){var that=this;$("#v3-banner").slideDown();var that=this;$(".banner-close").on("click",function(){that.dismissV3BannerPopover()})},initV3SidebarPopover:function(){var that=this;$(".v3-sidebar").show();$(".v3-sidebar").popover({animation:false,content:Handlebars.templates.v3_carousel(),placement:"top",trtgger:"manual",html:true,container:".v3-popover-wrapper"}).on("click",function(){that.showV3Popover(this,"sidebar");tracker.sendAppView("virtualScreen/upgrade2/bottomSticker_click")})},dismissV3BannerPopover:function(){$("#banner-new-version").popover("hide");$(".v3-popover-wrapper").hide();$("#v3-banner").slideUp()},showV3Popover:function(popover,location){var that=this;$(".v3-popover-wrapper").show();$(".v3-popover-wrapper").on("click",function(){this.hideV3Popover(popover)}.bind(this));$(popover).popover("show");$("#modal-backdrop").show();$(".v3-popover-wrapper .popover").on("click",function(e){e.stopPropagation()});$(".v3-carousel-close-button").on("click",function(){this.hideV3Popover(popover)}.bind(this));if(location==="sidebar"){$(".v3-popover-wrapper .popover").css("top","initial");$(".v3-sidebar").addClass("force-click")}this.initV3Carousel();$(".v3-carousel-button").click(function(){tracker.sendAppView("virtualScreen/upgrade2/getApp_click");window.open("https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop","_blank")})},initV3Carousel:function(){var $carousel=$(".popover").find("#v3-carousel");$carousel.carousel({interval:5000,pause:""});$carousel.on("click",".carousel-indicators li",function(){var targetSlide=$(this).data("slide-to");if(targetSlide!==undefined){$carousel.data("carousel").pause().to(targetSlide).cycle()}})},hideV3Popover:function(popover){$(".v3-carousel-button").off();$(popover).popover("hide");$(".v3-popover-wrapper").hide();$("#modal-backdrop").hide();$(".v3-sidebar").removeClass("force-click")},onModalOpen:function(activeModal){pm.layout.activeModal=activeModal;pm.layout.isModalOpen=true},onModalClose:function(){pm.layout.activeModal="";pm.layout.isModalOpen=false},attachModalHandlers:function(){$("#modal-new-collection").on("shown",function(){$("#new-collection-blank").focus();pm.layout.onModalOpen("#modal-new-collection")});$("#modal-new-collection").on("hidden",function(){pm.layout.onModalClose()});$("#modal-edit-collection").on("shown",function(){$("#modal-edit-collection .collection-name").focus();pm.layout.onModalOpen("#modal-edit-collection")});$("#modal-edit-collection").on("hidden",function(){pm.layout.onModalClose()});$("#modal-edit-collection-request").on("shown",function(){$("#modal-edit-collection-request .collection-request-name").focus();pm.layout.onModalOpen("#modal-edit-collection-request")});$("#modal-edit-collection-request").on("hidden",function(){pm.layout.onModalClose()});$("#modal-add-to-collection").on("shown",function(){$("#select-collection").focus();pm.layout.onModalOpen("#modal-add-to-collection")});$("#modal-add-to-collection").on("hidden",function(){pm.layout.onModalClose()});$("#modal-import-collection").on("shown",function(){pm.layout.onModalOpen("#modal-import-collection")});$("#modal-import-collection").on("hidden",function(){pm.layout.onModalClose()});$("#modal-delete-collection").on("shown",function(){pm.layout.onModalOpen("#modal-delete-collection")});$("#modal-delete-collection").on("hidden",function(){pm.layout.onModalClose()});$("#modal-environments").on("shown",function(){$(".environments-actions-add").focus();pm.layout.onModalOpen("#modal-environments")});$("#modal-environments").on("hidden",function(){pm.layout.onModalClose()});$("#modal-header-presets").on("shown",function(){$(".header-presets-actions-add").focus();pm.layout.onModalOpen("#modal-header-presets")});$("#modal-header-presets").on("hidden",function(){pm.layout.onModalClose()});$("#modal-settings").on("shown",function(){$("#history-count").focus();pm.layout.onModalOpen("#modal-settings")});$("#modal-settings").on("hidden",function(){pm.layout.onModalClose()});$("#modal-spread-the-word").on("shown",function(){pm.layout.onModalOpen("#modal-spread-the-word")});$("#modal-spread-the-word").on("hidden",function(){pm.layout.onModalClose()});$("#modal-shortcuts").on("shown",function(){pm.layout.onModalOpen("#modal-shortcuts")});$("#modal-shortcuts").on("hidden",function(){pm.layout.onModalClose()
})},setLayout:function(){this.refreshScrollPanes()},refreshScrollPanes:function(){var newMainWidth=$("#container").width()-$("#sidebar").width();$("#main").width(newMainWidth+"px");if($("#sidebar").width()>100){$("#sidebar").jScrollPane({mouseWheelSpeed:24})}},hideDonationBar:function(){$("#sidebar-footer").css("display","none")},sidebar:{currentSection:"history",isSidebarMaximized:true,sections:["history","collections"],width:0,animationDuration:250,minimizeSidebar:function(){var animationDuration=pm.layout.sidebar.animationDuration;$("#sidebar-toggle").animate({left:"0"},animationDuration);$("#sidebar").animate({width:"5px"},animationDuration);$("#sidebar-footer").css("display","none");$("#sidebar div").animate({opacity:0},animationDuration);var newMainWidth=$(document).width()-5;$("#main").animate({width:newMainWidth+"px","margin-left":"5px"},animationDuration);$("#sidebar-toggle img").attr("src","img/tri_arrow_right.png")},maximizeSidebar:function(){var animationDuration=pm.layout.sidebar.animationDuration;$("#sidebar-toggle").animate({left:"350px"},animationDuration,function(){$("#sidebar-footer").fadeIn()});$("#sidebar").animate({width:pm.layout.sidebar.width+"px"},animationDuration);$("#sidebar div").animate({opacity:1},animationDuration);$("#sidebar-toggle img").attr("src","img/tri_arrow_left.png");var newMainWidth=$(document).width()-pm.layout.sidebar.width;$("#main").animate({width:newMainWidth+"px","margin-left":pm.layout.sidebar.width+"px"},animationDuration);pm.layout.refreshScrollPanes()},toggleSidebar:function(){var isSidebarMaximized=pm.layout.sidebar.isSidebarMaximized;if(isSidebarMaximized){pm.layout.sidebar.minimizeSidebar()}else{pm.layout.sidebar.maximizeSidebar()}pm.layout.sidebar.isSidebarMaximized=!isSidebarMaximized},init:function(){$("#history-items").on("click",".request-actions-delete",function(){var request_id=$(this).attr("data-request-id");pm.history.deleteRequest(request_id)});$("#history-items").on("click",".request",function(){var request_id=$(this).attr("data-request-id");pm.history.loadRequest(request_id)});$("#sidebar-toggle").on("click",function(){pm.layout.sidebar.toggleSidebar()});pm.layout.sidebar.width=$("#sidebar").width()+10;this.addRequestListeners()},select:function(section){if(pm.collections.areLoaded===false){pm.collections.getAllCollections()}$("#sidebar-section-"+this.currentSection).css("display","none");$("#"+this.currentSection+"-options").css("display","none");this.currentSection=section;$("#sidebar-section-"+section).fadeIn();$("#"+section+"-options").css("display","block");pm.layout.refreshScrollPanes();return true},addRequest:function(url,method,id,position){if(url.length>80){url=url.substring(0,80)+"..."}url=limitStringLineWidth(url,40);var request={url:url,method:method,id:id,position:position};if(position==="top"){$("#history-items").prepend(Handlebars.templates.item_history_sidebar_request(request))}else{$("#history-items").append(Handlebars.templates.item_history_sidebar_request(request))}$("#sidebar-section-history .empty-message").css("display","none");pm.layout.refreshScrollPanes()},addRequestListeners:function(){$("#sidebar-sections").on("mouseenter",".sidebar-request",function(){var actionsEl=jQuery(".request-actions",this);actionsEl.css("display","block")});$("#sidebar-sections").on("mouseleave",".sidebar-request",function(){var actionsEl=jQuery(".request-actions",this);actionsEl.css("display","none")})},emptyCollectionInSidebar:function(id){$("#collection-requests-"+id).html("")},removeRequestFromHistory:function(id,toAnimate){if(toAnimate){$("#sidebar-request-"+id).slideUp(100)}else{$("#sidebar-request-"+id).remove()}if(pm.history.requests.length===0){pm.history.showEmptyMessage()}else{pm.history.hideEmptyMessage()}pm.layout.refreshScrollPanes()},removeCollection:function(id){$("#collection-"+id).remove();pm.layout.refreshScrollPanes()}}};pm.request={url:"",urlParams:{},name:"",description:"",bodyParams:{},headers:[],method:"GET",dataMode:"params",isFromCollection:false,collectionRequestId:"",methodsWithBody:["POST","PUT","PATCH","DELETE","LINK","UNLINK"],areListenersAdded:false,startTime:0,endTime:0,xhr:null,editorMode:0,responses:[],body:{mode:"params",data:"",isEditorInitialized:false,codeMirror:false,init:function(){this.initPreview();this.initFormDataEditor();this.initUrlEncodedEditor();this.initEditorListeners()},initPreview:function(){$(".request-preview-header-limitations").dropdown()},hide:function(){pm.request.body.closeFormDataEditor();pm.request.body.closeUrlEncodedEditor();$("#data").css("display","none")},getRawData:function(){if(pm.request.body.isEditorInitialized){return pm.request.body.codeMirror.getValue()}else{return""}},loadRawData:function(data){var body=pm.request.body;if(body.isEditorInitialized===true){body.codeMirror.setValue(data);body.codeMirror.refresh()}},initCodeMirrorEditor:function(){pm.request.body.isEditorInitialized=true;var bodyTextarea=document.getElementById("body");pm.request.body.codeMirror=CodeMirror.fromTextArea(bodyTextarea,{mode:"htmlmixed",lineNumbers:true,theme:"eclipse"});
$("#request .CodeMirror").resizable({stop:function(){pm.request.body.codeMirror.refresh()},resize:function(event,ui){ui.size.width=ui.originalSize.width;$(".CodeMirror-scroll").height($(this).height());pm.request.body.codeMirror.refresh()}});$("#request .CodeMirror-scroll").css("height","200px");pm.request.body.codeMirror.refresh()},setEditorMode:function(mode,language){var displayMode=$("#body-editor-mode-selector a[data-language='"+language+"']").html();$("#body-editor-mode-item-selected").html(displayMode);if(pm.request.body.isEditorInitialized){if(mode==="javascript"){pm.request.body.codeMirror.setOption("mode",{"name":"javascript","json":true})}else{pm.request.body.codeMirror.setOption("mode",mode)}if(mode==="text"){$("#body-editor-mode-selector-format").addClass("disabled")}else{$("#body-editor-mode-selector-format").removeClass("disabled")}pm.request.body.codeMirror.refresh()}},autoFormatEditor:function(mode){var content=pm.request.body.codeMirror.getValue(),validated=null,result=null;$("#body-editor-mode-selector-format-result").empty().hide();if(pm.request.body.isEditorInitialized){if(mode==="javascript"){try{validated=pm.jsonlint.instance.parse(content);if(validated){content=JSON.parse(pm.request.body.codeMirror.getValue());pm.request.body.codeMirror.setValue(JSON.stringify(content,null,4))}}catch(e){result=e.message;$("#body-editor-mode-selector-format-result").html(result).show()}}else{var totalLines=pm.request.body.codeMirror.lineCount(),totalChars=pm.request.body.codeMirror.getValue().length;pm.request.body.codeMirror.autoFormatRange({line:0,ch:0},{line:totalLines-1,ch:pm.request.body.codeMirror.getLine(totalLines-1).length})}}},initFormDataEditor:function(){var editorId="#formdata-keyvaleditor";var params={placeHolderKey:"Key",placeHolderValue:"Value",valueTypes:["text","file"],deleteButton:'<img class="deleteButton" src="s/pm/img/delete.png">',onDeleteRow:function(){},onBlurElement:function(){}};$(editorId).keyvalueeditor("init",params)},initUrlEncodedEditor:function(){var editorId="#urlencoded-keyvaleditor";var params={placeHolderKey:"Key",placeHolderValue:"Value",valueTypes:["text"],deleteButton:'<img class="deleteButton" src="s/pm/img/delete.png">',onDeleteRow:function(){},onBlurElement:function(){}};$(editorId).keyvalueeditor("init",params)},initEditorListeners:function(){$("#body-editor-mode-selector .dropdown-menu").on("click","a",function(event){var editorMode=$(event.target).attr("data-editor-mode");var language=$(event.target).attr("data-language");pm.request.body.setEditorMode(editorMode,language)});$("#body-editor-mode-selector-format").on("click.postman",function(evt){var editorMode=$(event.target).attr("data-editor-mode");if($(evt.currentTarget).hasClass("disabled")){return}})},openFormDataEditor:function(){var containerId="#formdata-keyvaleditor-container";$(containerId).css("display","block");var editorId="#formdata-keyvaleditor";var params=$(editorId).keyvalueeditor("getValues");var newParams=[];for(var i=0;i<params.length;i++){var param={key:params[i].key,value:params[i].value};newParams.push(param)}},closeFormDataEditor:function(){var containerId="#formdata-keyvaleditor-container";$(containerId).css("display","none")},openUrlEncodedEditor:function(){var containerId="#urlencoded-keyvaleditor-container";$(containerId).css("display","block");var editorId="#urlencoded-keyvaleditor";var params=$(editorId).keyvalueeditor("getValues");var newParams=[];for(var i=0;i<params.length;i++){var param={key:params[i].key,value:params[i].value};newParams.push(param)}},closeUrlEncodedEditor:function(){var containerId="#urlencoded-keyvaleditor-container";$(containerId).css("display","none")},setDataMode:function(mode){pm.request.dataMode=mode;pm.request.body.mode=mode;$("#data-mode-selector a").removeClass("active");$('#data-mode-selector a[data-mode="'+mode+'"]').addClass("active");$("#body-editor-mode-selector").css("display","none");if(mode==="params"){pm.request.body.openFormDataEditor();pm.request.body.closeUrlEncodedEditor();$("#body-data-container").css("display","none")}else{if(mode==="raw"){pm.request.body.closeUrlEncodedEditor();pm.request.body.closeFormDataEditor();$("#body-data-container").css("display","block");if(pm.request.body.isEditorInitialized===false){pm.request.body.initCodeMirrorEditor()}else{pm.request.body.codeMirror.refresh()}$("#body-editor-mode-selector").css("display","block")}else{if(mode==="urlencoded"){pm.request.body.closeFormDataEditor();pm.request.body.openUrlEncodedEditor();$("#body-data-container").css("display","none")}}}},getDataMode:function(){return pm.request.body.mode},getData:function(asObjects){var data;var mode=pm.request.body.mode;var params;var newParams;var param;var i;if(mode==="params"){params=$("#formdata-keyvaleditor").keyvalueeditor("getValues");newParams=[];for(i=0;i<params.length;i++){param={key:params[i].key,value:params[i].value,type:params[i].type};newParams.push(param)}if(asObjects===true){return newParams}else{data=pm.request.getBodyParamString(newParams)
}}else{if(mode==="raw"){data=pm.request.body.getRawData()}else{if(mode==="urlencoded"){params=$("#urlencoded-keyvaleditor").keyvalueeditor("getValues");newParams=[];for(i=0;i<params.length;i++){param={key:params[i].key,value:params[i].value,type:params[i].type};newParams.push(param)}if(asObjects===true){return newParams}else{data=pm.request.getBodyParamString(newParams)}}}}return data},loadData:function(mode,data,asObjects){var body=pm.request.body;body.setDataMode(mode);body.data=data;var params;if(mode==="params"){if(asObjects===true){$("#formdata-keyvaleditor").keyvalueeditor("reset",data)}else{params=getBodyVars(data,false);$("#formdata-keyvaleditor").keyvalueeditor("reset",params)}}else{if(mode==="raw"){body.loadRawData(data)}else{if(mode==="urlencoded"){if(asObjects===true){$("#urlencoded-keyvaleditor").keyvalueeditor("reset",data)}else{params=getBodyVars(data,false);$("#urlencoded-keyvaleditor").keyvalueeditor("reset",params)}}}}}},init:function(){this.url="";this.urlParams={};this.body.data="";this.bodyParams={};this.headers=[];this.method="GET";this.dataMode="params";if(!this.areListenersAdded){this.areListenersAdded=true;this.initializeHeaderEditor();this.initializeUrlEditor();this.body.init();this.addListeners()}var lastRequest=pm.settings.get("lastRequest");if(lastRequest!==""){var lastRequestParsed=JSON.parse(lastRequest);pm.request.isFromCollection=false;pm.request.loadRequestInEditor(lastRequestParsed)}},setHeaderValue:function(key,value){var headers=pm.request.headers;var origKey=key;key=key.toLowerCase();var found=false;for(var i=0,count=headers.length;i<count;i++){var headerKey=headers[i].key.toLowerCase();if(headerKey===key&&value!=="text"){headers[i].value=value;found=true}}var editorId="#headers-keyvaleditor";if(!found&&value!=="text"){var header={"key":origKey,"value":value};headers.push(header)}$(editorId).keyvalueeditor("reset",headers)},getHeaderValue:function(key){var headers=pm.request.headers;key=key.toLowerCase();for(var i=0,count=headers.length;i<count;i++){var headerKey=headers[i].key.toLowerCase();if(headerKey===key){return headers[i].value}}return false},getHeaderEditorParams:function(){var hs=$("#headers-keyvaleditor").keyvalueeditor("getValues");var newHeaders=[];for(var i=0;i<hs.length;i++){var header={key:hs[i].key,value:hs[i].value,name:hs[i].key};newHeaders.push(header)}return newHeaders},onHeaderAutoCompleteItemSelect:function(item){if(item.type=="preset"){var preset=pm.headerPresets.getHeaderPreset(item.id);if("headers" in preset){var headers=$("#headers-keyvaleditor").keyvalueeditor("getValues");var loc=-1;for(var i=0;i<headers.length;i++){if(headers[i].key===item.label){loc=i;break}}if(loc>=0){headers.splice(loc,1)}var newHeaders=_.union(headers,preset.headers);$("#headers-keyvaleditor").keyvalueeditor("reset",newHeaders);var element=$("#headers-keyvaleditor .keyvalueeditor-last input:first-child")[0];$("#headers-keyvaleditor .keyvalueeditor-last input:first-child")[0].focus();setTimeout(function(){element.focus()},10)}}},initializeHeaderEditor:function(){var params={placeHolderKey:"Header",placeHolderValue:"Value",deleteButton:'<img class="deleteButton" src="s/pm/img/delete.png">',onInit:function(){},onAddedParam:function(){$("#headers-keyvaleditor .keyvalueeditor-key").catcomplete({source:pm.headerPresets.presetsForAutoComplete,delay:50,select:function(event,item){pm.request.onHeaderAutoCompleteItemSelect(item.item)}})},onDeleteRow:function(){pm.request.headers=pm.request.getHeaderEditorParams();$("#headers-keyvaleditor-actions-open .headers-count").html(pm.request.headers.length)},onFocusElement:function(){$("#headers-keyvaleditor .keyvalueeditor-key").catcomplete({source:pm.headerPresets.presetsForAutoComplete,delay:50,select:function(event,item){pm.request.onHeaderAutoCompleteItemSelect(item.item)}})},onBlurElement:function(){$("#headers-keyvaleditor .keyvalueeditor-key").catcomplete({source:pm.headerPresets.presetsForAutoComplete,delay:50,select:function(event,item){pm.request.onHeaderAutoCompleteItemSelect(item.item)}});pm.request.headers=pm.request.getHeaderEditorParams();$("#headers-keyvaleditor-actions-open .headers-count").html(pm.request.headers.length)},onReset:function(){var hs=$("#headers-keyvaleditor").keyvalueeditor("getValues");$("#headers-keyvaleditor-actions-open .headers-count").html(hs.length)}};$("#headers-keyvaleditor").keyvalueeditor("init",params);$("#headers-keyvaleditor-actions-close").on("click",function(){$("#headers-keyvaleditor-actions-open").removeClass("active");pm.request.closeHeaderEditor()});$("#headers-keyvaleditor-actions-open").on("click",function(){var isDisplayed=$("#headers-keyvaleditor-container").css("display")==="block";if(isDisplayed){pm.request.closeHeaderEditor()}else{pm.request.openHeaderEditor()}})},getAsJson:function(){var request={url:$("#url").val(),data:pm.request.body.getData(true),headers:pm.request.getPackedHeaders(),dataMode:pm.request.dataMode,method:pm.request.method,version:2};return JSON.stringify(request)
},saveCurrentRequestToLocalStorage:function(){pm.settings.set("lastRequest",pm.request.getAsJson())},openHeaderEditor:function(){$("#headers-keyvaleditor-actions-open").addClass("active");var containerId="#headers-keyvaleditor-container";$(containerId).css("display","block")},closeHeaderEditor:function(){$("#headers-keyvaleditor-actions-open").removeClass("active");var containerId="#headers-keyvaleditor-container";$(containerId).css("display","none")},getUrlEditorParams:function(){var editorId="#url-keyvaleditor";var params=$(editorId).keyvalueeditor("getValues");var newParams=[];for(var i=0;i<params.length;i++){var param={key:params[i].key,value:params[i].value};newParams.push(param)}return newParams},initializeUrlEditor:function(){var editorId;editorId="#url-keyvaleditor";var params={placeHolderKey:"URL Parameter Key",placeHolderValue:"Value",deleteButton:'<img class="deleteButton" src="s/pm/img/delete.png">',onDeleteRow:function(){pm.request.setUrlParamString(pm.request.getUrlEditorParams())},onBlurElement:function(){pm.request.setUrlParamString(pm.request.getUrlEditorParams())}};$(editorId).keyvalueeditor("init",params);$("#url-keyvaleditor-actions-close").on("click",function(){pm.request.closeUrlEditor()});$("#url-keyvaleditor-actions-open").on("click",function(){var isDisplayed=$("#url-keyvaleditor-container").css("display")==="block";if(isDisplayed){pm.request.closeUrlEditor()}else{var newRows=getUrlVars($("#url").val(),false);$(editorId).keyvalueeditor("reset",newRows);pm.request.openUrlEditor()}})},openUrlEditor:function(){$("#url-keyvaleditor-actions-open").addClass("active");var containerId="#url-keyvaleditor-container";$(containerId).css("display","block")},closeUrlEditor:function(){$("#url-keyvaleditor-actions-open").removeClass("active");var containerId="#url-keyvaleditor-container";$(containerId).css("display","none")},addListeners:function(){$("#data-mode-selector").on("click","a",function(){var mode=$(this).attr("data-mode");pm.request.body.setDataMode(mode)});$(".request-meta-actions-togglesize").on("click",function(){var action=$(this).attr("data-action");if(action==="minimize"){$(this).attr("data-action","maximize");$(".request-meta-actions-togglesize img").attr("src","img/circle_plus.png");$("#request-description-container").slideUp(100)}else{$(".request-meta-actions-togglesize img").attr("src","img/circle_minus.png");$(this).attr("data-action","minimize");$("#request-description-container").slideDown(100)}});$("#url").keyup(function(){var newRows=getUrlVars($("#url").val(),false);$("#url-keyvaleditor").keyvalueeditor("reset",newRows)});$("#add-to-collection").on("click",function(){if(pm.collections.areLoaded===false){pm.collections.getAllCollections()}});$("#submit-request").on("click",function(){pm.request.send("text")});$("#preview-request").on("click",function(){pm.request.handlePreviewClick()});$("#update-request-in-collection").on("click",function(){pm.collections.updateCollectionFromCurrentRequest()});$("#cancel-request").on("click",function(){pm.request.cancel()});$("#request-actions-reset").on("click",function(){pm.request.startNew()});$("#request-method-selector").change(function(){var val=$(this).val();pm.request.setMethod(val)})},getTotalTime:function(){this.totalTime=this.endTime-this.startTime;return this.totalTime},response:{status:"",responseCode:[],time:0,headers:[],cookies:[],mime:"",text:"",state:{size:"normal"},previewType:"parsed",setMode:function(mode){var text=pm.request.response.text;pm.request.response.setFormat(mode,text,pm.settings.get("previewType"),true)},stripScriptTag:function(text){var re=/<script\b[^>]*>([\s\S]*?)<\/script>/gm;text=text.replace(re,"");return text},changePreviewType:function(newType){if(this.previewType===newType){return}this.previewType=newType;$("#response-formatting a").removeClass("active");$('#response-formatting a[data-type="'+this.previewType+'"]').addClass("active");pm.settings.set("previewType",newType);if(newType==="raw"){$("#response-as-text").css("display","block");$("#response-as-code").css("display","none");$("#response-as-preview").css("display","none");$("#code-data-raw").val(this.text);var codeDataWidth=$(document).width()-$("#sidebar").width()-60;$("#code-data-raw").css("width",codeDataWidth+"px");$("#code-data-raw").css("height","600px");$("#response-pretty-modifiers").css("display","none")}else{if(newType==="parsed"){$("#response-as-text").css("display","none");$("#response-as-code").css("display","block");$("#response-as-preview").css("display","none");$("#code-data").css("display","none");$("#response-pretty-modifiers").css("display","block");pm.editor.codeMirror.refresh()}else{if(newType==="preview"){$("#response-as-text").css("display","none");$("#response-as-code").css("display","none");$("#code-data").css("display","none");$("#response-as-preview").css("display","block");$("#response-pretty-modifiers").css("display","none")}}}},loadHeaders:function(data){this.headers=pm.request.unpackResponseHeaders(data);if(pm.settings.get("usePostmanProxy")===true){var count=this.headers.length;
for(var i=0;i<count;i++){if(this.headers[i].key=="Postman-Location"){this.headers[i].key="Location";this.headers[i].name="Location";break}}}$("#response-headers").html("");this.headers=_.sortBy(this.headers,function(header){return header.name});$("#response-headers").append(Handlebars.templates.response_headers({"items":this.headers}));$(".response-header-name").popover({trigger:"hover",})},clear:function(){this.startTime=0;this.endTime=0;this.totalTime=0;this.status="";this.time=0;this.headers={};this.mime="";this.state.size="normal";this.previewType="parsed";$("#response").css("display","none")},showScreen:function(screen){$("#response").css("display","block");var active_id="#response-"+screen+"-container";var all_ids=["#response-waiting-container","#response-failed-container","#response-success-container"];for(var i=0;i<3;i++){$(all_ids[i]).css("display","none")}$(active_id).css("display","block")},render:function(response){pm.request.response.showScreen("success");$("#response-status").html(Handlebars.templates.item_response_code(response.responseCode));$(".response-code").popover({trigger:"hover"});$("#response-headers").append(Handlebars.templates.response_headers({"items":response.headers}));$('.response-tabs li[data-section="headers"]').html("Headers ("+response.headers.length+")");$("#response-data").css("display","block");$("#loader").css("display","none");$("#response-time .data").html(response.time+" ms");var contentTypeIndexOf=find(response.headers,function(element,index,collection){return element.key==="Content-Type"});var contentType;if(contentTypeIndexOf>=0){contentType=response.headers[contentTypeIndexOf].value}$("#response").css("display","block");$("#submit-request").button("reset");$("#code-data").css("display","block");var language="html";pm.request.response.previewType=pm.settings.get("previewType");var responsePreviewType="html";if(!_.isUndefined(contentType)&&!_.isNull(contentType)){if(contentType.search(/json/i)!==-1||contentType.search(/javascript/i)!==-1||pm.settings.get("languageDetection")=="javascript"){language="javascript"}$("#language").val(language);if(contentType.search(/image/i)>=0){responsePreviewType="image";$("#response-as-code").css("display","none");$("#response-as-text").css("display","none");$("#response-as-image").css("display","block");var imgLink=pm.request.processUrl($("#url").val());$("#response-formatting").css("display","none");$("#response-actions").css("display","none");$("#response-language").css("display","none");$("#response-as-preview").css("display","none");$("#response-pretty-modifiers").css("display","none");$("#response-as-image").html("<img src='"+imgLink+"'/>")}else{responsePreviewType="html";pm.request.response.setFormat(language,response.text,pm.settings.get("previewType"),true)}}else{if(pm.settings.get("languageDetection")=="javascript"){language="javascript"}pm.request.response.setFormat(language,response.text,pm.settings.get("previewType"),true)}pm.request.response.renderCookies(response.cookies);if(responsePreviewType==="html"){$("#response-as-preview").html("");pm.request.response.iframeRefreshedRecently=false;pm.request.response.iframeRefreshWarning=null;var cleanResponseText=pm.request.response.stripScriptTag(pm.request.response.text);pm.filesystem.renderResponsePreview("response.html",cleanResponseText,"html",function(response_url){$("#response-as-preview").html("<iframe></iframe>");$("#response-as-preview>iframe").load(function(){if(pm.request.response.iframeRefreshedRecently){jQuery("#response-as-preview>iframe").attr("src","");console.log("Iframe multi-refresh");clearTimeout(pm.request.response.iframeRefreshWarning);pm.request.response.iframeRefreshWarning=setTimeout(function(){noty({type:"error",text:"The page is being infinitely refreshed. Cannot render preview.",layout:"topCenter",timeout:750})},500)}pm.request.response.iframeRefreshedRecently=true;setTimeout(function(){pm.request.response.iframeRefreshedRecently=false},300)});$("#response-as-preview>iframe").attr("src",response_url).attr("height",800)})}if(pm.request.method==="HEAD"){pm.request.response.showHeaders()}if(pm.request.isFromCollection===true){$("#response-collection-request-actions").css("display","block")}else{$("#response-collection-request-actions").css("display","none")}$("#response-sample-status").css("display","block");var r=pm.request.response;r.time=response.time;r.cookies=response.cookies;r.headers=response.headers;r.text=response.text;r.responseCode=response.responseCode;$("#response-samples").css("display","block")},load:function(response){$("#response-sample-status").css("display","none");if(response.readyState==4){if(response.status==0){var errorUrl=pm.envManager.getCurrentValue(pm.request.url);$("#connection-error-url").html("<a href='"+errorUrl+"' target='_blank'>"+errorUrl+"</a>");pm.request.response.showScreen("failed");$("#submit-request").button("reset");return false}pm.request.response.showScreen("success");pm.request.response.showBody();var responseCodeName;
var responseCodeDetail;if(response.status in httpStatusCodes){responseCodeName=httpStatusCodes[response.status]["name"];responseCodeDetail=httpStatusCodes[response.status]["detail"]}else{responseCodeName="";responseCodeDetail=""}if("statusText" in response){responseCodeName=response.statusText}else{responseCodeName=httpStatusCodes[response.status]["name"]}var responseCode={"code":response.status,"name":responseCodeName,"detail":responseCodeDetail};var responseData;if(response.responseRawDataType=="arraybuffer"){responseData=response.response}else{this.text=response.responseText}pm.request.endTime=new Date().getTime();var diff=pm.request.getTotalTime();pm.request.response.time=diff;pm.request.response.responseCode=responseCode;$("#response-status").html(Handlebars.templates.item_response_code(responseCode));$(".response-code").popover({trigger:"hover"});this.loadHeaders(response.getAllResponseHeaders());$('.response-tabs li[data-section="headers"]').html("Headers ("+this.headers.length+")");$("#response-data").css("display","block");$("#loader").css("display","none");$("#response-time .data").html(diff+" ms");var contentType=response.getResponseHeader("Content-Type");$("#response").css("display","block");$("#submit-request").button("reset");$("#code-data").css("display","block");var language="html";pm.request.response.previewType=pm.settings.get("previewType");var responsePreviewType="html";if(!_.isUndefined(contentType)&&!_.isNull(contentType)){if(contentType.search(/json/i)!==-1||contentType.search(/javascript/i)!==-1||pm.settings.get("languageDetection")=="javascript"){language="javascript"}$("#language").val(language);if(contentType.search(/image/i)>=0){responsePreviewType="image";$("#response-as-code").css("display","none");$("#response-as-text").css("display","none");$("#response-as-image").css("display","block");var imgLink=pm.request.processUrl($("#url").val());$("#response-formatting").css("display","none");$("#response-actions").css("display","none");$("#response-language").css("display","none");$("#response-as-preview").css("display","none");$("#response-pretty-modifiers").css("display","none");$("#response-as-image").html("<img src='"+imgLink+"'/>")}else{if(contentType.search(/pdf/i)>=0&&response.responseRawDataType=="arraybuffer"){responsePreviewType="pdf";$("#response-as-code").css("display","none");$("#response-as-text").css("display","none");$("#response-as-image").css("display","none");$("#response-formatting").css("display","none");$("#response-actions").css("display","none");$("#response-language").css("display","none");$("#response-as-preview").html("");$("#response-as-preview").css("display","block");$("#response-pretty-modifiers").css("display","none");pm.filesystem.renderResponsePreview("response.pdf",responseData,"pdf",function(response_url){$("#response-as-preview").html("<iframe src='"+response_url+"'/>")})}else{if(contentType.search(/pdf/i)>=0&&response.responseRawDataType=="text"){pm.request.send("arraybuffer");return}else{responsePreviewType="html";this.setFormat(language,this.text,pm.settings.get("previewType"),true)}}}}else{if(pm.settings.get("languageDetection")=="javascript"){language="javascript"}this.setFormat(language,this.text,pm.settings.get("previewType"),true)}var url=pm.request.url;if(responsePreviewType==="html"){$("#response-as-preview").html("");pm.request.response.iframeRefreshedRecently=false;pm.request.response.iframeRefreshWarning=null;if(!pm.settings.get("disableIframePreview")){var cleanResponseText=pm.request.response.stripScriptTag(pm.request.response.text);pm.filesystem.renderResponsePreview("response.html",cleanResponseText,"html",function(response_url){$("#response-as-preview").html("<iframe></iframe>");$("#response-as-preview>iframe").load(function(){if(pm.request.response.iframeRefreshedRecently){jQuery("#response-as-preview>iframe").attr("src","");console.log("Iframe multi-refresh");clearTimeout(pm.request.response.iframeRefreshWarning);pm.request.response.iframeRefreshWarning=setTimeout(function(){noty({type:"error",text:"The page is being infinitely refreshed. Cannot render preview.",layout:"topCenter",timeout:750})},500)}pm.request.response.iframeRefreshedRecently=true;setTimeout(function(){pm.request.response.iframeRefreshedRecently=false},300)})})}}if(pm.request.method==="HEAD"){pm.request.response.showHeaders()}if(pm.request.isFromCollection===true){$("#response-collection-request-actions").css("display","block")}else{$("#response-collection-request-actions").css("display","none")}}pm.layout.setLayout();return true},renderCookies:function(cookies){var count=0;if(!cookies){count=0}else{count=cookies.length}if(count===0){$("#response-tabs-cookies").html("Cookies");$("#response-tabs-cookies").css("display","none")}else{$("#response-tabs-cookies").html("Cookies ("+count+")");$("#response-tabs-cookies").css("display","block");cookies=_.sortBy(cookies,function(cookie){return cookie.name});for(var i=0;i<count;i++){var cookie=cookies[i];if("expirationDate" in cookie){var date=new Date(cookie.expirationDate*1000);
cookies[i].expires=date.toUTCString()}}$("#response-cookies-items").html(Handlebars.templates.response_cookies({"items":cookies}))}pm.request.response.cookies=cookies},setFormat:function(language,response,format,forceCreate){$("#response-as-code").css("display","block");$("#response-as-text").css("display","none");$("#response-as-image").css("display","none");$("#response-formatting").css("display","block");$("#response-actions").css("display","block");$("#response-formatting a").removeClass("active");$('#response-formatting a[data-type="'+format+'"]').addClass("active");$("#code-data").css("display","none");$("#code-data").attr("data-mime",language);var codeDataArea=document.getElementById("code-data");var foldFunc;var mode;$("#response-language").css("display","block");$("#response-language a").removeClass("active");if(language==="javascript"){try{if("string"===typeof response&&response.match(/^[\)\]\}]/)){response=response.substring(response.indexOf("\n"))}response=vkbeautify.json(response);mode="javascript";foldFunc=CodeMirror.newFoldFunction(CodeMirror.braceRangeFinder)}catch(e){mode="text"}$('#response-language a[data-mode="javascript"]').addClass("active")}else{if(language==="html"){response=vkbeautify.xml(response);mode="xml";foldFunc=CodeMirror.newFoldFunction(CodeMirror.tagRangeFinder);$('#response-language a[data-mode="html"]').addClass("active")}else{mode="text"}}var lineWrapping;if(pm.settings.get("lineWrapping")===true){$("#response-body-line-wrapping").addClass("active");lineWrapping=true}else{$("#response-body-line-wrapping").removeClass("active");lineWrapping=false}pm.editor.mode=mode;var renderMode=mode;if($.inArray(mode,["javascript","xml","html"])>=0){renderMode="links"}if(!pm.editor.codeMirror||forceCreate){$("#response .CodeMirror").remove();pm.editor.codeMirror=CodeMirror.fromTextArea(codeDataArea,{mode:renderMode,lineNumbers:true,fixedGutter:true,onGutterClick:foldFunc,theme:"eclipse",lineWrapping:lineWrapping,readOnly:true});var cm=pm.editor.codeMirror;cm.setValue(response)}else{pm.editor.codeMirror.setOption("onGutterClick",foldFunc);pm.editor.codeMirror.setOption("mode",renderMode);pm.editor.codeMirror.setOption("lineWrapping",lineWrapping);pm.editor.codeMirror.setOption("theme","eclipse");pm.editor.codeMirror.setOption("readOnly",false);pm.editor.codeMirror.setValue(response);pm.editor.codeMirror.refresh();CodeMirror.commands["goDocStart"](pm.editor.codeMirror);$(window).scrollTop(0)}if(format==="parsed"){$("#response-as-code").css("display","block");$("#response-as-text").css("display","none");$("#response-pretty-modifiers").css("display","block")}else{if(format==="raw"){$("#code-data-raw").val(response);var codeDataWidth=$(document).width()-$("#sidebar").width()-60;$("#code-data-raw").css("width",codeDataWidth+"px");$("#code-data-raw").css("height","600px");$("#response-as-code").css("display","none");$("#response-as-text").css("display","block");$("#response-pretty-modifiers").css("display","none")}else{if(format==="preview"){$("#response-as-code").css("display","none");$("#response-as-text").css("display","none");$("#response-pretty-modifiers").css("display","none")}}}},toggleBodySize:function(){if($("#response").css("display")==="none"){return false}$('a[rel="tooltip"]').tooltip("hide");if(this.state.size==="normal"){this.state.size="maximized";$("#response-body-toggle img").attr("src","img/full-screen-exit-alt-2.png");this.state.width=$("#response-data").width();this.state.height=$("#response-data").height();this.state.display=$("#response-data").css("display");this.state.position=$("#response-data").css("position");$("#response-data").css("position","absolute");$("#response-data").css("left",0);$("#response-data").css("top","-15px");$("#response-data").css("width",$(document).width()-20);$("#response-data").css("height",$(document).height());$("#response-data").css("z-index",100);$("#response-data").css("background-color","#fff");$("#response-data").css("padding","10px")}else{this.state.size="normal";$("#response-body-toggle img").attr("src","img/full-screen-alt-4.png");$("#response-data").css("position",this.state.position);$("#response-data").css("left",0);$("#response-data").css("top",0);$("#response-data").css("width",this.state.width);$("#response-data").css("height",this.state.height);$("#response-data").css("z-index",10);$("#response-data").css("background-color","#fff");$("#response-data").css("padding","0px")}},showHeaders:function(){$(".response-tabs li").removeClass("active");$('.response-tabs li[data-section="headers"]').addClass("active");$("#response-data-container").css("display","none");$("#response-headers-container").css("display","block");$("#response-cookies-container").css("display","none")},showBody:function(){$(".response-tabs li").removeClass("active");$('.response-tabs li[data-section="body"]').addClass("active");$("#response-data-container").css("display","block");$("#response-headers-container").css("display","none");$("#response-cookies-container").css("display","none")
},showCookies:function(){$(".response-tabs li").removeClass("active");$('.response-tabs li[data-section="cookies"]').addClass("active");$("#response-data-container").css("display","none");$("#response-headers-container").css("display","none");$("#response-cookies-container").css("display","block")}},startNew:function(){pm.request.showRequestBuilder();$(".sidebar-collection-request").removeClass("sidebar-collection-request-active");if(pm.request.xhr!==null){pm.request.xhr.abort()}this.url="";this.urlParams={};this.body.data="";this.bodyParams={};this.name="";this.description="";this.headers=[];this.method="GET";this.dataMode="params";this.refreshLayout();$("#url-keyvaleditor").keyvalueeditor("reset");$("#headers-keyvaleditor").keyvalueeditor("reset");$("#formdata-keyvaleditor").keyvalueeditor("reset");$("#update-request-in-collection").css("display","none");$("#url").val();$("#url").focus();this.response.clear()},cancel:function(){if(pm.request.xhr!==null){pm.request.xhr.abort()}pm.request.response.clear()},setMethod:function(method){this.url=$("#url").val();this.method=method;this.refreshLayout()},refreshLayout:function(){$("#url").val(this.url);$("#request-method-selector").val(this.method);pm.request.body.loadRawData(pm.request.body.getData());$("#headers-keyvaleditor").keyvalueeditor("reset",this.headers);$("#headers-keyvaleditor-actions-open .headers-count").html(this.headers.length);$("#submit-request").button("reset");$("#data-mode-selector a").removeClass("active");$('#data-mode-selector a[data-mode="'+this.dataMode+'"]').addClass("active");if(this.isMethodWithBody(this.method)){$("#data").css("display","block");var mode=this.dataMode;pm.request.body.setDataMode(mode)}else{pm.request.body.hide()}if(this.name!==""){$("#request-meta").css("display","block");$("#request-name").css("display","inline-block");if($("#request-description").css("display")==="block"){$("#request-description").css("display","block")}else{$("#request-description").css("display","none")}}else{$("#request-meta").css("display","none");$("#request-name").css("display","none");$("#request-description").css("display","none");$("#request-samples").css("display","none")}$(".request-help-actions-togglesize a").attr("data-action","minimize");$(".request-help-actions-togglesize img").attr("src","img/circle_minus.png")},loadRequestFromLink:function(link,headers){this.startNew();this.url=link;this.method="GET";pm.request.isFromCollection=false;if(pm.settings.get("retainLinkHeaders")===true){if(headers){pm.request.headers=headers}}this.refreshLayout();var newRows=getUrlVars($("#url").val(),false);$("#url-keyvaleditor").keyvalueeditor("reset",newRows)},isMethodWithBody:function(method){method=method.toUpperCase();return $.inArray(method,pm.request.methodsWithBody)>=0},packHeaders:function(headers){var headersLength=headers.length;var paramString="";for(var i=0;i<headersLength;i++){var h=headers[i];if(h.name&&h.name!==""){paramString+=h.name+": "+h.value+"\n"}}return paramString},getPackedHeaders:function(){return this.packHeaders(this.headers)},unpackResponseHeaders:function(data){if(data===null||data===""){return[]}else{var vars=[],hash;var hashes=data.split("\n");var header;for(var i=0;i<hashes.length;i++){hash=hashes[i];var loc=hash.search(":");if(loc!==-1){var name=$.trim(hash.substr(0,loc));var value=$.trim(hash.substr(loc+1));header={"name":name,"key":name,"value":value,"description":headerDetails[name.toLowerCase()]};if(name.toLowerCase()==="link"){header.isLink=true}vars.push(header)}}return vars}},unpackHeaders:function(data){if(data===null||data===""){return[]}else{var vars=[],hash;var hashes=data.split("\n");var header;for(var i=0;i<hashes.length;i++){hash=hashes[i];if(!hash){continue}var loc=hash.search(":");if(loc!==-1){var name=$.trim(hash.substr(0,loc));var value=$.trim(hash.substr(loc+1));header={"name":$.trim(name),"key":$.trim(name),"value":$.trim(value),"description":headerDetails[$.trim(name).toLowerCase()]};vars.push(header)}}return vars}},loadRequestInEditor:function(request,isFromCollection,isFromSample){pm.request.showRequestBuilder();pm.helpers.showRequestHelper("normal");this.url=request.url;this.body.data=request.body;this.method=request.method.toUpperCase();if(isFromCollection){$("#update-request-in-collection").css("display","inline-block");if(typeof request.name!=="undefined"){this.name=request.name;$("#request-meta").css("display","block");$("#request-name").html(this.name);$("#request-name").css("display","inline-block")}else{this.name="";$("#request-meta").css("display","none");$("#request-name").css("display","none")}if(typeof request.description!=="undefined"){this.description=request.description;$("#request-description").html(this.description);$("#request-description").css("display","block")}else{this.description="";$("#request-description").css("display","none")}$("#response-sample-save-form").css("display","none");$(".request-meta-actions-togglesize").attr("data-action","minimize");$(".request-meta-actions-togglesize img").attr("src","img/circle_minus.png");
if("responses" in request){pm.request.responses=request.responses;$("#request-samples").css("display","block");if(request.responses){if(request.responses.length>0){$("#request-samples table").html("");$("#request-samples table").append(Handlebars.templates.sample_responses({"items":request.responses}))}else{$("#request-samples table").html("");$("#request-samples").css("display","none")}}else{pm.request.responses=[];$("#request-samples table").html("");$("#request-samples").css("display","none")}}else{pm.request.responses=[];$("#request-samples table").html("");$("#request-samples").css("display","none")}}else{if(isFromSample){$("#update-request-in-collection").css("display","inline-block")}else{this.name="";$("#request-meta").css("display","none");$("#update-request-in-collection").css("display","none")}}if(typeof request.headers!=="undefined"){this.headers=this.unpackHeaders(request.headers)}else{this.headers=[]}$("#headers-keyvaleditor-actions-open .headers-count").html(this.headers.length);$("#url").val(this.url);var newUrlParams=getUrlVars(this.url,false);$("#url-keyvaleditor").keyvalueeditor("reset",newUrlParams);$("#headers-keyvaleditor").keyvalueeditor("reset",this.headers);this.response.clear();$("#request-method-selector").val(this.method);if(this.isMethodWithBody(this.method)){this.dataMode=request.dataMode;$("#data").css("display","block");if("version" in request){if(request.version==2){pm.request.body.loadData(request.dataMode,request.data,true)}else{pm.request.body.loadData(request.dataMode,request.data)}}else{pm.request.body.loadData(request.dataMode,request.data)}}else{$("#data").css("display","none")}var contentType=pm.request.getHeaderValue("Content-Type");var mode;var language;if(contentType===false){mode="text";language="text"}else{if(contentType.search(/json/i)!==-1||contentType.search(/javascript/i)!==-1){mode="javascript";language="json"}else{if(contentType.search(/xml/i)!==-1){mode="xml";language="xml"}else{if(contentType.search(/html/i)!==-1){mode="xml";language="html"}else{language="text";contentType="text"}}}}pm.request.body.setEditorMode(mode,language);$("body").scrollTop(0)},getBodyParamString:function(params){var paramsLength=params.length;var paramArr=[];for(var i=0;i<paramsLength;i++){var p=params[i];if(p.key&&p.key!==""){paramArr.push(p.key+"="+p.value)}}return paramArr.join("&")},setUrlParamString:function(params){this.url=$("#url").val();var url=this.url;var paramArr=[];for(var i=0;i<params.length;i++){var p=params[i];if(p.key&&p.key!==""){paramArr.push(p.key+"="+p.value)}}var baseUrl=url.split("?")[0];if(paramArr.length>0){$("#url").val(baseUrl+"?"+paramArr.join("&"))}else{if(url.indexOf("?")>0&&url.indexOf("=")>0){$("#url").val(baseUrl)}else{$("#url").val(url)}}},reset:function(){},encodeUrl:function(url){var quesLocation=url.indexOf("?");if(quesLocation>0){var urlVars=getUrlVars(url);var baseUrl=url.substring(0,quesLocation);var urlVarsCount=urlVars.length;var newUrl=baseUrl+"?";for(var i=0;i<urlVarsCount;i++){newUrl+=encodeURIComponent(urlVars[i].key)+"="+encodeURIComponent(urlVars[i].value)+"&"}newUrl=newUrl.substr(0,newUrl.length-1);return url}else{return url}},prepareHeadersForProxy:function(headers){var count=headers.length;for(var i=0;i<count;i++){var key=headers[i].key.toLowerCase();if(_.indexOf(pm.bannedHeaders,key)>=0){headers[i].key="Postman-"+headers[i].key;headers[i].name="Postman-"+headers[i].name}}return headers},processUrl:function(url){var finalUrl=pm.envManager.getCurrentValue(url);finalUrl=ensureProperUrl(finalUrl);return finalUrl},prepareForSending:function(){pm.request.setUrlParamString(pm.request.getUrlEditorParams());if(pm.helpers.activeHelper=="oauth1"&&pm.helpers.oAuth1.isAutoEnabled){pm.helpers.oAuth1.generateHelper();pm.helpers.oAuth1.process()}$("#headers-keyvaleditor-actions-open .headers-count").html(pm.request.headers.length);pm.request.url=pm.request.processUrl($("#url").val());pm.request.startTime=new Date().getTime()},getXhrHeaders:function(){pm.request.headers=pm.request.getHeaderEditorParams();var headers=pm.request.getHeaderEditorParams();if(pm.settings.get("sendNoCacheHeader")===true){var noCacheHeader={key:"Cache-Control",name:"Cache-Control",value:"no-cache"};headers.push(noCacheHeader)}if(pm.request.dataMode==="urlencoded"){var urlencodedHeader={key:"Content-Type",name:"Content-Type",value:"application/x-www-form-urlencoded"};headers.push(urlencodedHeader)}if(pm.settings.get("usePostmanProxy")==true){headers=pm.request.prepareHeadersForProxy(headers)}var i;var finalHeaders=[];for(i=0;i<headers.length;i++){var header=headers[i];if(!_.isEmpty(header.value)){header.value=pm.envManager.getCurrentValue(header.value);finalHeaders.push(header)}}return finalHeaders},getDummyFormDataBoundary:function(){var boundary="----WebKitFormBoundaryE19zNvXGzXaLvS5C";return boundary},getFormDataPreview:function(){var rows,count,j;var row,key,value;var i;rows=$("#formdata-keyvaleditor").keyvalueeditor("getElements");count=rows.length;var params=[];if(count>0){for(j=0;
j<count;j++){row=rows[j];key=row.keyElement.val();var valueType=row.valueType;var valueElement=row.valueElement;if(valueType==="file"){var domEl=valueElement.get(0);var len=domEl.files.length;for(i=0;i<len;i++){var fileObj={key:key,value:domEl.files[i],type:"file",};params.push(fileObj)}}else{value=valueElement.val();value=pm.envManager.getCurrentValue(value);var textObj={key:key,value:value,type:"text",};params.push(textObj)}}console.log(params);var paramsCount=params.length;var body="";for(i=0;i<paramsCount;i++){var param=params[i];console.log(param);body+=pm.request.getDummyFormDataBoundary();if(param.type==="text"){body+='<br/>Content-Disposition: form-data; name="'+param.key+'"<br/><br/>';body+=param.value;body+="<br/>"}else{if(param.type==="file"){body+='<br/>Content-Disposition: form-data; name="'+param.key+'"; filename=';body+='"'+param.value.name+'"<br/>';body+="Content-Type: "+param.value.type;body+="<br/><br/><br/>"}}}body+=pm.request.getDummyFormDataBoundary();return body}else{return false}},getFormDataBody:function(){var rows,count,j;var i;var row,key,value;var paramsBodyData=new FormData();rows=$("#formdata-keyvaleditor").keyvalueeditor("getElements");count=rows.length;if(count>0){for(j=0;j<count;j++){row=rows[j];key=row.keyElement.val();var valueType=row.valueType;var valueElement=row.valueElement;if(valueType==="file"){var domEl=valueElement.get(0);var len=domEl.files.length;for(i=0;i<len;i++){paramsBodyData.append(key,domEl.files[i])}}else{value=valueElement.val();value=pm.envManager.getCurrentValue(value);paramsBodyData.append(key,value)}}return paramsBodyData}else{return false}},getUrlEncodedBody:function(){var rows,count,j;var row,key,value;var urlEncodedBodyData="";rows=$("#urlencoded-keyvaleditor").keyvalueeditor("getElements");count=rows.length;if(count>0){for(j=0;j<count;j++){row=rows[j];value=row.valueElement.val();value=pm.envManager.getCurrentValue(value);value=encodeURIComponent(value);value=value.replace(/%20/g,"+");key=encodeURIComponent(row.keyElement.val());key=key.replace(/%20/g,"+");urlEncodedBodyData+=key+"="+value+"&"}urlEncodedBodyData=urlEncodedBodyData.substr(0,urlEncodedBodyData.length-1);return urlEncodedBodyData}else{return false}},getRequestBodyPreview:function(){if(pm.request.dataMode==="raw"){var rawBodyData=pm.request.body.getData(true);rawBodyData=pm.envManager.getCurrentValue(rawBodyData);return rawBodyData}else{if(pm.request.dataMode==="params"){var formDataBody=pm.request.getFormDataPreview();if(formDataBody!==false){return formDataBody}else{return false}}else{if(pm.request.dataMode==="urlencoded"){var urlEncodedBodyData=pm.request.getUrlEncodedBody();if(urlEncodedBodyData!==false){return urlEncodedBodyData}else{return false}}}}},getRequestBodyToBeSent:function(){if(pm.request.dataMode==="raw"){var rawBodyData=pm.request.body.getData(true);rawBodyData=pm.envManager.getCurrentValue(rawBodyData);return rawBodyData}else{if(pm.request.dataMode==="params"){var formDataBody=pm.request.getFormDataBody();if(formDataBody!==false){return formDataBody}else{return false}}else{if(pm.request.dataMode==="urlencoded"){var urlEncodedBodyData=pm.request.getUrlEncodedBody();if(urlEncodedBodyData!==false){return urlEncodedBodyData}else{return false}}}}},send:function(responseRawDataType){pm.request.prepareForSending();if(pm.request.url===""){return}var originalUrl=$("#url").val();var url=pm.request.encodeUrl(pm.request.url);var method=pm.request.method.toUpperCase();var originalData=pm.request.body.getData(true);var xhr=new XMLHttpRequest();xhr.open(method,url,true);xhr.onreadystatechange=function(event){pm.request.response.load(event.target)};if(!responseRawDataType){responseRawDataType="text"}xhr.responseType=responseRawDataType;var headers=pm.request.getXhrHeaders(headers);for(var i=0;i<headers.length;i++){xhr.setRequestHeader(headers[i].name,headers[i].value)}if(pm.request.isMethodWithBody(method)){var body=pm.request.getRequestBodyToBeSent();if(body===false){xhr.send()}else{xhr.send(body)}}else{xhr.send()}pm.request.response.iframeRefreshedRecently=false;pm.request.xhr=xhr;if(pm.settings.get("autoSaveRequest")){pm.history.addRequest(originalUrl,method,pm.request.getPackedHeaders(),originalData,pm.request.dataMode)}pm.request.updateUiPostSending()},updateUiPostSending:function(){$("#submit-request").button("loading");pm.request.response.clear();pm.request.response.showScreen("waiting")},splitUrlIntoHostAndPath:function(url){var path="";var host;var parts=url.split("/");host=parts[2];var partsCount=parts.length;for(var i=3;i<partsCount;i++){path+="/"+parts[i]}return{host:host,path:path}},showRequestBuilder:function(){$("#preview-request").html("Preview");pm.request.editorMode=0;$("#request-builder").css("display","block");$("#request-preview").css("display","none")},showPreview:function(){$("#preview-request").html("Build");pm.request.editorMode=1;$("#request-builder").css("display","none");$("#request-preview").css("display","block")},handlePreviewClick:function(){if(pm.request.editorMode==1){pm.request.showRequestBuilder()
}else{pm.request.showPreview()}pm.request.prepareForSending();var method=pm.request.method.toUpperCase();var httpVersion="HTTP/1.1";var hostAndPath=pm.request.splitUrlIntoHostAndPath(pm.request.url);var path=hostAndPath.path;var host=hostAndPath.host;var headers=pm.request.getXhrHeaders();var hasBody=pm.request.isMethodWithBody(pm.request.method.toUpperCase());var body;if(hasBody){body=pm.request.getRequestBodyPreview()}var requestPreview=method+" "+path+" "+httpVersion+"<br/>";requestPreview+="Host: "+host+"<br/>";var headersCount=headers.length;for(var i=0;i<headersCount;i++){requestPreview+=headers[i].key+": "+headers[i].value+"<br/>"}if(hasBody&&body!==false){requestPreview+="<br/>"+body+"<br/><br/>"}else{requestPreview+="<br/><br/>"}$("#request-preview-content").html(requestPreview)}};pm.settings={historyCount:50,lastRequest:"",autoSaveRequest:true,selectedEnvironmentId:"",createSettings:function(){pm.settings.create("historyCount",100);pm.settings.create("autoSaveRequest",true);pm.settings.create("selectedEnvironmentId",true);pm.settings.create("lineWrapping",true);pm.settings.create("disableIframePreview",false);pm.settings.create("previewType","parsed");pm.settings.create("retainLinkHeaders",false);pm.settings.create("sendNoCacheHeader",true);pm.settings.create("usePostmanProxy",false);pm.settings.create("proxyURL","");pm.settings.create("lastRequest","");pm.settings.create("launcherNotificationCount",0);pm.settings.create("variableDelimiter","{{...}}");pm.settings.create("languageDetection","auto");pm.settings.create("haveDonated",false);pm.settings.create("v3BannerDismissed",false)},initValues:function(){$("#history-count").val(pm.settings.get("historyCount"));$("#auto-save-request").val(pm.settings.get("autoSaveRequest")+"");$("#retain-link-headers").val(pm.settings.get("retainLinkHeaders")+"");$("#send-no-cache-header").val(pm.settings.get("sendNoCacheHeader")+"");$("#use-postman-proxy").val(pm.settings.get("usePostmanProxy")+"");$("#postman-proxy-url").val(pm.settings.get("postmanProxyUrl"));$("#variable-delimiter").val(pm.settings.get("variableDelimiter"));$("#language-detection").val(pm.settings.get("languageDetection"));$("#have-donated").val(pm.settings.get("haveDonated")+"");$("#disable-iframe-preview").val(pm.settings.get("disableIframePreview")+"")},initListeners:function(){$("#history-count").change(function(){pm.settings.set("historyCount",$("#history-count").val())});$("#auto-save-request").change(function(){var val=$("#auto-save-request").val();if(val=="true"){pm.settings.set("autoSaveRequest",true)}else{pm.settings.set("autoSaveRequest",false)}});$("#retain-link-headers").change(function(){var val=$("#retain-link-headers").val();if(val==="true"){pm.settings.set("retainLinkHeaders",true)}else{pm.settings.set("retainLinkHeaders",false)}});$("#send-no-cache-header").change(function(){var val=$("#send-no-cache-header").val();if(val=="true"){pm.settings.set("sendNoCacheHeader",true)}else{pm.settings.set("sendNoCacheHeader",false)}});$("#use-postman-proxy").change(function(){var val=$("#use-postman-proxy").val();if(val=="true"){pm.settings.set("usePostmanProxy",true);$("#postman-proxy-url-container").css("display","block")}else{pm.settings.set("usePostmanProxy",false);$("#postman-proxy-url-container").css("display","none")}});$("#disable-iframe-preview").change(function(){var val=$("#disable-iframe-preview").val();if(val=="true"){pm.settings.set("disableIframePreview",true)}else{pm.settings.set("disableIframePreview",false)}});$("#postman-proxy-url").change(function(){pm.settings.set("postmanProxyUrl",$("#postman-proxy-url").val())});$("#variable-delimiter").change(function(){pm.settings.set("variableDelimiter",$("#variable-delimiter").val())});$("#language-detection").change(function(){pm.settings.set("languageDetection",$("#language-detection").val())});$("#have-donated").change(function(){var val=$("#have-donated").val();if(val=="true"){pm.layout.hideDonationBar();pm.settings.set("haveDonated",true)}else{pm.settings.set("haveDonated",false)}});if(pm.settings.get("usePostmanProxy")==true){$("#postman-proxy-url-container").css("display","block")}else{$("#postman-proxy-url-container").css("display","none")}},init:function(){pm.settings.createSettings();pm.settings.initValues();pm.settings.initListeners()},create:function(key,defaultVal){if(localStorage[key]){pm.settings[key]=localStorage[key]}else{if(defaultVal!=="undefined"){pm.settings[key]=defaultVal;localStorage[key]=defaultVal}}},set:function(key,value){pm.settings[key]=value;localStorage[key]=value},get:function(key){var val=localStorage[key];if(val==="true"){return true}else{if(val==="false"){return false}else{return localStorage[key]}}}};pm.urlCache={urls:[],addUrl:function(url){if($.inArray(url,this.urls)==-1){pm.urlCache.urls.push(url);this.refreshAutoComplete()}},refreshAutoComplete:function(){$("#url").autocomplete({source:pm.urlCache.urls,delay:50})}};